import{u as h}from"./chunk-A28ZiPww.js";import{h2 as p,lE as u,oB as d,h1 as f}from"./chunk-xdbuWCSg.js";import{s as v,a as g}from"./chunk-B3AFDltd.js";const y={cursor:{type:String,default:""}},_={"update:cursor":s=>s||!0},N=p({emits:_,props:y,setup(s,{emit:a}){const e=h();class t extends f{eventName;handler;cacheData;constructor(i,l){super(),this.eventName=i,this.handler=l}add(){const i=e.on(this.eventName,this.handler);this.removeHandler=i.remove}}const n=e[v],c=new t("click",async o=>{const i=await e.hitTest(o);console.log("va_view_click_event",{view:e,event:o,hitTestResult:i}),n.emit("click",{view:e,event:o,hitTestResult:i})});c.add(),u(()=>{c.remove()});const r=new t("pointer-move",d(async o=>{const i=await e.hitTest(o),l=i.results[0];let m;if(l&&(l.type==="media"?m=l.layer:l.type==="graphic"&&(m=l.graphic?.layer)),m){const w=m[g];a("update:cursor",w)}else a("update:cursor","initial");n.emit("pointer-move",{view:e,event:o,hitTestResult:i})},600,{leading:!1,trailing:!0}));return r.add(),u(()=>{r.remove()}),()=>null}}),k=p({setup(){const s=h();class a extends f{propertyName;handler;cacheData;constructor(r,o){super(),this.propertyName=r,this.handler=o}add(){const r=s.watch(this.propertyName,this.handler);this.removeHandler=r.remove}}const e=s[v],t=new a("extent",d((c,r)=>{e.emit("watch:extent",[c,r])},50));t.add(),u(()=>{t.remove()});const n=new a("scale",d((c,r)=>{e.emit("watch:scale",[c,r])},50));return n.add(),u(()=>{n.remove()}),()=>null}});function M(s){return{all:s=s||new Map,on:function(a,e){var t=s.get(a);t?t.push(e):s.set(a,[e])},off:function(a,e){var t=s.get(a);t&&(e?t.splice(t.indexOf(e)>>>0,1):s.set(a,[]))},emit:function(a,e){var t=s.get(a);t&&t.slice().map(function(n){n(e)}),(t=s.get("*"))&&t.slice().map(function(n){n(a,e)})}}}export{N as _,k as a,_ as e,M as m,y as p};
