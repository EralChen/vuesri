import{p as Ir}from"./chunk-gtyL-bMM.js";import{Cw as Mr,Cx as Fr,Cy as Cr,h2 as Nr,lw as $r,h8 as Dr,oG as At,h3 as Pt,lx as ze,U as Lr,cB as Gr,lG as Ur,hf as Xr,h5 as Br,h6 as Wr,h9 as Yr,hc as zr,qa as Vr,hn as Hr}from"./chunk-xdbuWCSg.js";import{f as kr}from"./chunk-PXg3VzVx.js";import{u as qr}from"./chunk-vUrHI-Qa.js";import{V as Zr}from"./chunk-LA4b6Enm.js";const jr={},Qr=Object.freeze(Object.defineProperty({__proto__:null,default:jr},Symbol.toStringTag,{value:"Module"})),Jr={...Ir,url:{type:String,required:!0},layerId:{type:String,required:!0},tileMatrixSetId:{type:String,default:"EPSG:3857"},defaultLayerOptions:{type:Object,default:()=>({})},optionsFromCapabilities:{type:Boolean,default:!1},tileInfo:{type:Object,default:void 0},fullExtent:{type:Object,default:void 0}},Kr={},en={REQUEST:"GetTile",SERVICE:"WMTS",VERSION:"1.0.0",FORMAT:"application/vnd.mapbox-vector-tile"},tn=t=>({...en,TILEROW:"{y}",TILECOL:"{x}",LAYER:t.layerId,TILEMATRIXSET:t.tileMatrixSetId,TILEMATRIX:"{z}"}),wt=(t,e,r)=>({currentVersion:10.81,capabilities:"TilesOnly",tiles:[t.url+"?"+Object.entries(tn({layerId:t.layerId,tileMatrixSetId:t.tileMatrixSetId})).map(([n,i])=>`${n}=${i}`).join("&")],fullExtent:{...r??kr,spatialReference:{wkid:4326}},tileInfo:e});var rn=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var o=Object.getOwnPropertySymbols(e);if(o.length!==1||o[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var a=Object.getOwnPropertyDescriptor(e,r);if(a.value!==i||a.enumerable!==!0)return!1}return!0},Ot=typeof Symbol<"u"&&Symbol,nn=rn,on=function(){return typeof Ot!="function"||typeof Symbol!="function"||typeof Ot("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:nn()},_t={foo:{}},an=Object,ln=function(){return{__proto__:_t}.foo===_t.foo&&!({__proto__:null}instanceof an)},sn="Function.prototype.bind called on incompatible ",un=Object.prototype.toString,fn=Math.max,cn="[object Function]",Rt=function(e,r){for(var n=[],i=0;i<e.length;i+=1)n[i]=e[i];for(var o=0;o<r.length;o+=1)n[o+e.length]=r[o];return n},pn=function(e,r){for(var n=[],i=r||0,o=0;i<e.length;i+=1,o+=1)n[o]=e[i];return n},yn=function(t,e){for(var r="",n=0;n<t.length;n+=1)r+=t[n],n+1<t.length&&(r+=e);return r},dn=function(e){var r=this;if(typeof r!="function"||un.apply(r)!==cn)throw new TypeError(sn+r);for(var n=pn(arguments,1),i,o=function(){if(this instanceof i){var f=r.apply(this,Rt(n,arguments));return Object(f)===f?f:this}return r.apply(e,Rt(n,arguments))},a=fn(0,r.length-n.length),s=[],l=0;l<a;l++)s[l]="$"+l;if(i=Function("binder","return function ("+yn(s,",")+"){ return binder.apply(this,arguments); }")(o),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i},hn=dn,pt=Function.prototype.bind||hn,mn=Function.prototype.call,gn=Object.prototype.hasOwnProperty,Sn=pt,vn=Sn.call(mn,gn),S,he=SyntaxError,nr=Function,ye=TypeError,Ve=function(t){try{return nr('"use strict"; return ('+t+").constructor;")()}catch{}},ne=Object.getOwnPropertyDescriptor;if(ne)try{ne({},"")}catch{ne=null}var He=function(){throw new ye},En=ne?function(){try{return arguments.callee,He}catch{try{return ne(arguments,"callee").get}catch{return He}}}():He,ae=on(),Tn=ln(),R=Object.getPrototypeOf||(Tn?function(t){return t.__proto__}:null),ce={},bn=typeof Uint8Array>"u"||!R?S:R(Uint8Array),ie={"%AggregateError%":typeof AggregateError>"u"?S:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?S:ArrayBuffer,"%ArrayIteratorPrototype%":ae&&R?R([][Symbol.iterator]()):S,"%AsyncFromSyncIteratorPrototype%":S,"%AsyncFunction%":ce,"%AsyncGenerator%":ce,"%AsyncGeneratorFunction%":ce,"%AsyncIteratorPrototype%":ce,"%Atomics%":typeof Atomics>"u"?S:Atomics,"%BigInt%":typeof BigInt>"u"?S:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?S:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?S:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?S:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?S:Float32Array,"%Float64Array%":typeof Float64Array>"u"?S:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?S:FinalizationRegistry,"%Function%":nr,"%GeneratorFunction%":ce,"%Int8Array%":typeof Int8Array>"u"?S:Int8Array,"%Int16Array%":typeof Int16Array>"u"?S:Int16Array,"%Int32Array%":typeof Int32Array>"u"?S:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":ae&&R?R(R([][Symbol.iterator]())):S,"%JSON%":typeof JSON=="object"?JSON:S,"%Map%":typeof Map>"u"?S:Map,"%MapIteratorPrototype%":typeof Map>"u"||!ae||!R?S:R(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?S:Promise,"%Proxy%":typeof Proxy>"u"?S:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?S:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?S:Set,"%SetIteratorPrototype%":typeof Set>"u"||!ae||!R?S:R(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?S:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":ae&&R?R(""[Symbol.iterator]()):S,"%Symbol%":ae?Symbol:S,"%SyntaxError%":he,"%ThrowTypeError%":En,"%TypedArray%":bn,"%TypeError%":ye,"%Uint8Array%":typeof Uint8Array>"u"?S:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?S:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?S:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?S:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?S:WeakMap,"%WeakRef%":typeof WeakRef>"u"?S:WeakRef,"%WeakSet%":typeof WeakSet>"u"?S:WeakSet};if(R)try{null.error}catch(t){var xn=R(R(t));ie["%Error.prototype%"]=xn}var An=function t(e){var r;if(e==="%AsyncFunction%")r=Ve("async function () {}");else if(e==="%GeneratorFunction%")r=Ve("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=Ve("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&R&&(r=R(i.prototype))}return ie[e]=r,r},It={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},we=pt,Ge=vn,Pn=we.call(Function.call,Array.prototype.concat),wn=we.call(Function.apply,Array.prototype.splice),Mt=we.call(Function.call,String.prototype.replace),Ue=we.call(Function.call,String.prototype.slice),On=we.call(Function.call,RegExp.prototype.exec),_n=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Rn=/\\(\\)?/g,In=function(e){var r=Ue(e,0,1),n=Ue(e,-1);if(r==="%"&&n!=="%")throw new he("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new he("invalid intrinsic syntax, expected opening `%`");var i=[];return Mt(e,_n,function(o,a,s,l){i[i.length]=s?Mt(l,Rn,"$1"):a||o}),i},Mn=function(e,r){var n=e,i;if(Ge(It,n)&&(i=It[n],n="%"+i[0]+"%"),Ge(ie,n)){var o=ie[n];if(o===ce&&(o=An(n)),typeof o>"u"&&!r)throw new ye("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:o}}throw new he("intrinsic "+e+" does not exist!")},oe=function(e,r){if(typeof e!="string"||e.length===0)throw new ye("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new ye('"allowMissing" argument must be a boolean');if(On(/^%?[^%]*%?$/,e)===null)throw new he("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=In(e),i=n.length>0?n[0]:"",o=Mn("%"+i+"%",r),a=o.name,s=o.value,l=!1,u=o.alias;u&&(i=u[0],wn(n,Pn([0,1],u)));for(var f=1,y=!0;f<n.length;f+=1){var c=n[f],m=Ue(c,0,1),h=Ue(c,-1);if((m==='"'||m==="'"||m==="`"||h==='"'||h==="'"||h==="`")&&m!==h)throw new he("property names with quotes must have matching quotes");if((c==="constructor"||!y)&&(l=!0),i+="."+c,a="%"+i+"%",Ge(ie,a))s=ie[a];else if(s!=null){if(!(c in s)){if(!r)throw new ye("base intrinsic for "+e+" exists, but the property is not available.");return}if(ne&&f+1>=n.length){var E=ne(s,c);y=!!E,y&&"get"in E&&!("originalValue"in E.get)?s=E.get:s=s[c]}else y=Ge(s,c),s=s[c];y&&!l&&(ie[a]=s)}}return s},ir={exports:{}},Fn=oe,tt=Fn("%Object.defineProperty%",!0),rt=function(){if(tt)try{return tt({},"a",{value:1}),!0}catch{return!1}return!1};rt.hasArrayLengthDefineBug=function(){if(!rt())return null;try{return tt([],"length",{value:1}).length!==1}catch{return!0}};var or=rt,Cn=oe,De=Cn("%Object.getOwnPropertyDescriptor%",!0);if(De)try{De([],"length")}catch{De=null}var ar=De,Nn=or(),yt=oe,be=Nn&&yt("%Object.defineProperty%",!0);if(be)try{be({},"a",{value:1})}catch{be=!1}var $n=yt("%SyntaxError%"),le=yt("%TypeError%"),Ft=ar,Dn=function(e,r,n){if(!e||typeof e!="object"&&typeof e!="function")throw new le("`obj` must be an object or a function`");if(typeof r!="string"&&typeof r!="symbol")throw new le("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new le("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new le("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new le("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new le("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,o=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,s=arguments.length>6?arguments[6]:!1,l=!!Ft&&Ft(e,r);if(be)be(e,r,{configurable:a===null&&l?l.configurable:!a,enumerable:i===null&&l?l.enumerable:!i,value:n,writable:o===null&&l?l.writable:!o});else if(s||!i&&!o&&!a)e[r]=n;else throw new $n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},lr=oe,Ct=Dn,Ln=or(),Nt=ar,$t=lr("%TypeError%"),Gn=lr("%Math.floor%"),Un=function(e,r){if(typeof e!="function")throw new $t("`fn` is not a function");if(typeof r!="number"||r<0||r>4294967295||Gn(r)!==r)throw new $t("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],i=!0,o=!0;if("length"in e&&Nt){var a=Nt(e,"length");a&&!a.configurable&&(i=!1),a&&!a.writable&&(o=!1)}return(i||o||!n)&&(Ln?Ct(e,"length",r,!0,!0):Ct(e,"length",r)),e};(function(t){var e=pt,r=oe,n=Un,i=r("%TypeError%"),o=r("%Function.prototype.apply%"),a=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(a,o),l=r("%Object.defineProperty%",!0),u=r("%Math.max%");if(l)try{l({},"a",{value:1})}catch{l=null}t.exports=function(c){if(typeof c!="function")throw new i("a function is required");var m=s(e,a,arguments);return n(m,1+u(0,c.length-(arguments.length-1)),!0)};var f=function(){return s(e,o,arguments)};l?l(t.exports,"apply",{value:f}):t.exports.apply=f})(ir);var Xn=ir.exports,sr=oe,ur=Xn,Bn=ur(sr("String.prototype.indexOf")),Wn=function(e,r){var n=sr(e,!!r);return typeof n=="function"&&Bn(e,".prototype.")>-1?ur(n):n};const Yn=Mr(Qr);var dt=typeof Map=="function"&&Map.prototype,ke=Object.getOwnPropertyDescriptor&&dt?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Xe=dt&&ke&&typeof ke.get=="function"?ke.get:null,Dt=dt&&Map.prototype.forEach,ht=typeof Set=="function"&&Set.prototype,qe=Object.getOwnPropertyDescriptor&&ht?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Be=ht&&qe&&typeof qe.get=="function"?qe.get:null,Lt=ht&&Set.prototype.forEach,zn=typeof WeakMap=="function"&&WeakMap.prototype,xe=zn?WeakMap.prototype.has:null,Vn=typeof WeakSet=="function"&&WeakSet.prototype,Ae=Vn?WeakSet.prototype.has:null,Hn=typeof WeakRef=="function"&&WeakRef.prototype,Gt=Hn?WeakRef.prototype.deref:null,kn=Boolean.prototype.valueOf,qn=Object.prototype.toString,Zn=Function.prototype.toString,jn=String.prototype.match,mt=String.prototype.slice,J=String.prototype.replace,Qn=String.prototype.toUpperCase,Ut=String.prototype.toLowerCase,fr=RegExp.prototype.test,Xt=Array.prototype.concat,V=Array.prototype.join,Jn=Array.prototype.slice,Bt=Math.floor,nt=typeof BigInt=="function"?BigInt.prototype.valueOf:null,Ze=Object.getOwnPropertySymbols,it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,me=typeof Symbol=="function"&&typeof Symbol.iterator=="object",N=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===me||!0)?Symbol.toStringTag:null,cr=Object.prototype.propertyIsEnumerable,Wt=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function Yt(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||fr.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-Bt(-t):Bt(t);if(n!==t){var i=String(n),o=mt.call(e,i.length+1);return J.call(i,r,"$&_")+"."+J.call(J.call(o,/([0-9]{3})/g,"$&_"),/_$/,"")}}return J.call(e,r,"$&_")}var ot=Yn,zt=ot.custom,Vt=yr(zt)?zt:null,Kn=function t(e,r,n,i){var o=r||{};if(j(o,"quoteStyle")&&o.quoteStyle!=="single"&&o.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(j(o,"maxStringLength")&&(typeof o.maxStringLength=="number"?o.maxStringLength<0&&o.maxStringLength!==1/0:o.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=j(o,"customInspect")?o.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(j(o,"indent")&&o.indent!==null&&o.indent!=="	"&&!(parseInt(o.indent,10)===o.indent&&o.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(j(o,"numericSeparator")&&typeof o.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var s=o.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return hr(e,o);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return s?Yt(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return s?Yt(e,u):u}var f=typeof o.depth>"u"?5:o.depth;if(typeof n>"u"&&(n=0),n>=f&&f>0&&typeof e=="object")return at(e)?"[Array]":"[Object]";var y=gi(o,n);if(typeof i>"u")i=[];else if(dr(i,e)>=0)return"[Circular]";function c(b,D,Y){if(D&&(i=Jn.call(i),i.push(D)),Y){var F={depth:o.depth};return j(o,"quoteStyle")&&(F.quoteStyle=o.quoteStyle),t(b,F,n+1,i)}return t(b,o,n+1,i)}if(typeof e=="function"&&!Ht(e)){var m=si(e),h=_e(e,c);return"[Function"+(m?": "+m:" (anonymous)")+"]"+(h.length>0?" { "+V.call(h,", ")+" }":"")}if(yr(e)){var E=me?J.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):it.call(e);return typeof e=="object"&&!me?Ee(E):E}if(di(e)){for(var P="<"+Ut.call(String(e.nodeName)),g=e.attributes||[],O=0;O<g.length;O++)P+=" "+g[O].name+"="+pr(ei(g[O].value),"double",o);return P+=">",e.childNodes&&e.childNodes.length&&(P+="..."),P+="</"+Ut.call(String(e.nodeName))+">",P}if(at(e)){if(e.length===0)return"[]";var x=_e(e,c);return y&&!mi(x)?"["+lt(x,y)+"]":"[ "+V.call(x,", ")+" ]"}if(ri(e)){var I=_e(e,c);return!("cause"in Error.prototype)&&"cause"in e&&!cr.call(e,"cause")?"{ ["+String(e)+"] "+V.call(Xt.call("[cause]: "+c(e.cause),I),", ")+" }":I.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+V.call(I,", ")+" }"}if(typeof e=="object"&&a){if(Vt&&typeof e[Vt]=="function"&&ot)return ot(e,{depth:f-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(ui(e)){var G=[];return Dt&&Dt.call(e,function(b,D){G.push(c(D,e,!0)+" => "+c(b,e))}),kt("Map",Xe.call(e),G,y)}if(pi(e)){var W=[];return Lt&&Lt.call(e,function(b){W.push(c(b,e))}),kt("Set",Be.call(e),W,y)}if(fi(e))return je("WeakMap");if(yi(e))return je("WeakSet");if(ci(e))return je("WeakRef");if(ii(e))return Ee(c(Number(e)));if(ai(e))return Ee(c(nt.call(e)));if(oi(e))return Ee(kn.call(e));if(ni(e))return Ee(c(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Fr)return"{ [object globalThis] }";if(!ti(e)&&!Ht(e)){var w=_e(e,c),X=Wt?Wt(e)===Object.prototype:e instanceof Object||e.constructor===Object,q=e instanceof Object?"":"null prototype",B=!X&&N&&Object(e)===e&&N in e?mt.call(ee(e),8,-1):q?"Object":"",$=X||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",d=$+(B||q?"["+V.call(Xt.call([],B||[],q||[]),": ")+"] ":"");return w.length===0?d+"{}":y?d+"{"+lt(w,y)+"}":d+"{ "+V.call(w,", ")+" }"}return String(e)};function pr(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function ei(t){return J.call(String(t),/"/g,"&quot;")}function at(t){return ee(t)==="[object Array]"&&(!N||!(typeof t=="object"&&N in t))}function ti(t){return ee(t)==="[object Date]"&&(!N||!(typeof t=="object"&&N in t))}function Ht(t){return ee(t)==="[object RegExp]"&&(!N||!(typeof t=="object"&&N in t))}function ri(t){return ee(t)==="[object Error]"&&(!N||!(typeof t=="object"&&N in t))}function ni(t){return ee(t)==="[object String]"&&(!N||!(typeof t=="object"&&N in t))}function ii(t){return ee(t)==="[object Number]"&&(!N||!(typeof t=="object"&&N in t))}function oi(t){return ee(t)==="[object Boolean]"&&(!N||!(typeof t=="object"&&N in t))}function yr(t){if(me)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!it)return!1;try{return it.call(t),!0}catch{}return!1}function ai(t){if(!t||typeof t!="object"||!nt)return!1;try{return nt.call(t),!0}catch{}return!1}var li=Object.prototype.hasOwnProperty||function(t){return t in this};function j(t,e){return li.call(t,e)}function ee(t){return qn.call(t)}function si(t){if(t.name)return t.name;var e=jn.call(Zn.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function dr(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function ui(t){if(!Xe||!t||typeof t!="object")return!1;try{Xe.call(t);try{Be.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function fi(t){if(!xe||!t||typeof t!="object")return!1;try{xe.call(t,xe);try{Ae.call(t,Ae)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function ci(t){if(!Gt||!t||typeof t!="object")return!1;try{return Gt.call(t),!0}catch{}return!1}function pi(t){if(!Be||!t||typeof t!="object")return!1;try{Be.call(t);try{Xe.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function yi(t){if(!Ae||!t||typeof t!="object")return!1;try{Ae.call(t,Ae);try{xe.call(t,xe)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function di(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function hr(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return hr(mt.call(t,0,e.maxStringLength),e)+n}var i=J.call(J.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,hi);return pr(i,"single",e)}function hi(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+Qn.call(e.toString(16))}function Ee(t){return"Object("+t+")"}function je(t){return t+" { ? }"}function kt(t,e,r,n){var i=n?lt(r,n):V.call(r,", ");return t+" ("+e+") {"+i+"}"}function mi(t){for(var e=0;e<t.length;e++)if(dr(t[e],`
`)>=0)return!1;return!0}function gi(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=V.call(Array(t.indent+1)," ");else return null;return{base:r,prev:V.call(Array(e+1),r)}}function lt(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+V.call(t,","+r)+`
`+e.prev}function _e(t,e){var r=at(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=j(t,i)?e(t[i],t):""}var o=typeof Ze=="function"?Ze(t):[],a;if(me){a={};for(var s=0;s<o.length;s++)a["$"+o[s]]=o[s]}for(var l in t)j(t,l)&&(r&&String(Number(l))===l&&l<t.length||me&&a["$"+l]instanceof Symbol||(fr.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof Ze=="function")for(var u=0;u<o.length;u++)cr.call(t,o[u])&&n.push("["+e(o[u])+"]: "+e(t[o[u]],t));return n}var gt=oe,Se=Wn,Si=Kn,vi=gt("%TypeError%"),Re=gt("%WeakMap%",!0),Ie=gt("%Map%",!0),Ei=Se("WeakMap.prototype.get",!0),Ti=Se("WeakMap.prototype.set",!0),bi=Se("WeakMap.prototype.has",!0),xi=Se("Map.prototype.get",!0),Ai=Se("Map.prototype.set",!0),Pi=Se("Map.prototype.has",!0),St=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},wi=function(t,e){var r=St(t,e);return r&&r.value},Oi=function(t,e,r){var n=St(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},_i=function(t,e){return!!St(t,e)},Ri=function(){var e,r,n,i={assert:function(o){if(!i.has(o))throw new vi("Side channel does not contain "+Si(o))},get:function(o){if(Re&&o&&(typeof o=="object"||typeof o=="function")){if(e)return Ei(e,o)}else if(Ie){if(r)return xi(r,o)}else if(n)return wi(n,o)},has:function(o){if(Re&&o&&(typeof o=="object"||typeof o=="function")){if(e)return bi(e,o)}else if(Ie){if(r)return Pi(r,o)}else if(n)return _i(n,o);return!1},set:function(o,a){Re&&o&&(typeof o=="object"||typeof o=="function")?(e||(e=new Re),Ti(e,o,a)):Ie?(r||(r=new Ie),Ai(r,o,a)):(n||(n={key:{},next:null}),Oi(n,o,a))}};return i},Ii=String.prototype.replace,Mi=/%20/g,Qe={RFC1738:"RFC1738",RFC3986:"RFC3986"},vt={default:Qe.RFC3986,formatters:{RFC1738:function(t){return Ii.call(t,Mi,"+")},RFC3986:function(t){return String(t)}},RFC1738:Qe.RFC1738,RFC3986:Qe.RFC3986},Fi=vt,Je=Object.prototype.hasOwnProperty,re=Array.isArray,z=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),Ci=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(re(n)){for(var i=[],o=0;o<n.length;++o)typeof n[o]<"u"&&i.push(n[o]);r.obj[r.prop]=i}}},mr=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},Ni=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(re(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!Je.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return re(e)&&!re(r)&&(i=mr(e,n)),re(e)&&re(r)?(r.forEach(function(o,a){if(Je.call(e,a)){var s=e[a];s&&typeof s=="object"&&o&&typeof o=="object"?e[a]=t(s,o,n):e.push(o)}else e[a]=o}),e):Object.keys(r).reduce(function(o,a){var s=r[a];return Je.call(o,a)?o[a]=t(o[a],s,n):o[a]=s,o},i)},$i=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},Di=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Li=function(e,r,n,i,o){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(f){return"%26%23"+parseInt(f.slice(2),16)+"%3B"});for(var s="",l=0;l<a.length;++l){var u=a.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||o===Fi.RFC1738&&(u===40||u===41)){s+=a.charAt(l);continue}if(u<128){s=s+z[u];continue}if(u<2048){s=s+(z[192|u>>6]+z[128|u&63]);continue}if(u<55296||u>=57344){s=s+(z[224|u>>12]+z[128|u>>6&63]+z[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|a.charCodeAt(l)&1023),s+=z[240|u>>18]+z[128|u>>12&63]+z[128|u>>6&63]+z[128|u&63]}return s},Gi=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var o=r[i],a=o.obj[o.prop],s=Object.keys(a),l=0;l<s.length;++l){var u=s[l],f=a[u];typeof f=="object"&&f!==null&&n.indexOf(f)===-1&&(r.push({obj:a,prop:u}),n.push(f))}return Ci(r),e},Ui=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Xi=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Bi=function(e,r){return[].concat(e,r)},Wi=function(e,r){if(re(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},gr={arrayToObject:mr,assign:$i,combine:Bi,compact:Gi,decode:Di,encode:Li,isBuffer:Xi,isRegExp:Ui,maybeMap:Wi,merge:Ni},Sr=Ri,Le=gr,Pe=vt,Yi=Object.prototype.hasOwnProperty,qt={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},k=Array.isArray,zi=Array.prototype.push,vr=function(t,e){zi.apply(t,k(e)?e:[e])},Vi=Date.prototype.toISOString,Zt=Pe.default,C={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:Le.encode,encodeValuesOnly:!1,format:Zt,formatter:Pe.formatters[Zt],indices:!1,serializeDate:function(e){return Vi.call(e)},skipNulls:!1,strictNullHandling:!1},Hi=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},Ke={},ki=function t(e,r,n,i,o,a,s,l,u,f,y,c,m,h,E,P){for(var g=e,O=P,x=0,I=!1;(O=O.get(Ke))!==void 0&&!I;){var G=O.get(e);if(x+=1,typeof G<"u"){if(G===x)throw new RangeError("Cyclic object value");I=!0}typeof O.get(Ke)>"u"&&(x=0)}if(typeof l=="function"?g=l(r,g):g instanceof Date?g=y(g):n==="comma"&&k(g)&&(g=Le.maybeMap(g,function(F){return F instanceof Date?y(F):F})),g===null){if(o)return s&&!h?s(r,C.encoder,E,"key",c):r;g=""}if(Hi(g)||Le.isBuffer(g)){if(s){var W=h?r:s(r,C.encoder,E,"key",c);return[m(W)+"="+m(s(g,C.encoder,E,"value",c))]}return[m(r)+"="+m(String(g))]}var w=[];if(typeof g>"u")return w;var X;if(n==="comma"&&k(g))h&&s&&(g=Le.maybeMap(g,s)),X=[{value:g.length>0?g.join(",")||null:void 0}];else if(k(l))X=l;else{var q=Object.keys(g);X=u?q.sort(u):q}for(var B=i&&k(g)&&g.length===1?r+"[]":r,$=0;$<X.length;++$){var d=X[$],b=typeof d=="object"&&typeof d.value<"u"?d.value:g[d];if(!(a&&b===null)){var D=k(g)?typeof n=="function"?n(B,d):B:B+(f?"."+d:"["+d+"]");P.set(e,x);var Y=Sr();Y.set(Ke,P),vr(w,t(b,D,n,i,o,a,n==="comma"&&h&&k(g)?null:s,l,u,f,y,c,m,h,E,Y))}}return w},qi=function(e){if(!e)return C;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||C.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Pe.default;if(typeof e.format<"u"){if(!Yi.call(Pe.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Pe.formatters[n],o=C.filter;return(typeof e.filter=="function"||k(e.filter))&&(o=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:C.addQueryPrefix,allowDots:typeof e.allowDots>"u"?C.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:C.charsetSentinel,delimiter:typeof e.delimiter>"u"?C.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:C.encode,encoder:typeof e.encoder=="function"?e.encoder:C.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:C.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:C.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:C.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:C.strictNullHandling}},Zi=function(t,e){var r=t,n=qi(e),i,o;typeof n.filter=="function"?(o=n.filter,r=o("",r)):k(n.filter)&&(o=n.filter,i=o);var a=[];if(typeof r!="object"||r===null)return"";var s;e&&e.arrayFormat in qt?s=e.arrayFormat:e&&"indices"in e?s=e.indices?"indices":"repeat":s="indices";var l=qt[s];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var f=Sr(),y=0;y<i.length;++y){var c=i[y];n.skipNulls&&r[c]===null||vr(a,ki(r[c],c,l,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,f))}var m=a.join(n.delimiter),h=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?h+="utf8=%26%2310003%3B&":h+="utf8=%E2%9C%93&"),m.length>0?h+m:""},ge=gr,st=Object.prototype.hasOwnProperty,ji=Array.isArray,_={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:ge.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Qi=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Er=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Ji="utf8=%26%2310003%3B",Ki="utf8=%E2%9C%93",eo=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,o=r.parameterLimit===1/0?void 0:r.parameterLimit,a=i.split(r.delimiter,o),s=-1,l,u=r.charset;if(r.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===Ki?u="utf-8":a[l]===Ji&&(u="iso-8859-1"),s=l,l=a.length);for(l=0;l<a.length;++l)if(l!==s){var f=a[l],y=f.indexOf("]="),c=y===-1?f.indexOf("="):y+1,m,h;c===-1?(m=r.decoder(f,_.decoder,u,"key"),h=r.strictNullHandling?null:""):(m=r.decoder(f.slice(0,c),_.decoder,u,"key"),h=ge.maybeMap(Er(f.slice(c+1),r),function(E){return r.decoder(E,_.decoder,u,"value")})),h&&r.interpretNumericEntities&&u==="iso-8859-1"&&(h=Qi(h)),f.indexOf("[]=")>-1&&(h=ji(h)?[h]:h),st.call(n,m)?n[m]=ge.combine(n[m],h):n[m]=h}return n},to=function(t,e,r,n){for(var i=n?e:Er(e,r),o=t.length-1;o>=0;--o){var a,s=t[o];if(s==="[]"&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var l=s.charAt(0)==="["&&s.charAt(s.length-1)==="]"?s.slice(1,-1):s,u=parseInt(l,10);!r.parseArrays&&l===""?a={0:i}:!isNaN(u)&&s!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(a=[],a[u]=i):l!=="__proto__"&&(a[l]=i)}i=a}return i},ro=function(e,r,n,i){if(e){var o=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,s=/(\[[^[\]]*])/g,l=n.depth>0&&a.exec(o),u=l?o.slice(0,l.index):o,f=[];if(u){if(!n.plainObjects&&st.call(Object.prototype,u)&&!n.allowPrototypes)return;f.push(u)}for(var y=0;n.depth>0&&(l=s.exec(o))!==null&&y<n.depth;){if(y+=1,!n.plainObjects&&st.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;f.push(l[1])}return l&&f.push("["+o.slice(l.index)+"]"),to(f,r,n,i)}},no=function(e){if(!e)return _;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?_.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?_.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:_.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:_.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:_.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:_.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:_.comma,decoder:typeof e.decoder=="function"?e.decoder:_.decoder,delimiter:typeof e.delimiter=="string"||ge.isRegExp(e.delimiter)?e.delimiter:_.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:_.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:_.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:_.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:_.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:_.strictNullHandling}},io=function(t,e){var r=no(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?eo(t,r):t,i=r.plainObjects?Object.create(null):{},o=Object.keys(n),a=0;a<o.length;++a){var s=o[a],l=ro(s,n[s],r,typeof t=="string");i=ge.merge(i,l,r)}return r.allowSparse===!0?i:ge.compact(i)},oo=Zi,ao=io,lo=vt,so={formats:lo,parse:ao,stringify:oo};const uo=Cr(so);function fo(){throw new Error("Unimplemented abstract method.")}function co(t,e){return t>e?1:t<e?-1:0}function po(t,e,r){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if(typeof r=="function"){for(let i=1;i<n;++i){const o=t[i];if(o===e)return i;if(o<e)return r(e,t[i-1],o)>0?i-1:i}return n-1}if(r>0){for(let i=1;i<n;++i)if(t[i]<e)return i-1;return n-1}if(r<0){for(let i=1;i<n;++i)if(t[i]<=e)return i;return n-1}for(let i=1;i<n;++i){if(t[i]==e)return i;if(t[i]<e)return t[i-1]-e<e-t[i]?i-1:i}return n-1}function yo(t,e,r){const n=e||co;return t.every(function(i,o){if(o===0)return!0;const a=n(t[o-1],i);return!(a>0||r&&a===0)})}function Et(t,e){return Tr(t,e,[]).join("")}function Tr(t,e,r){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?r.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(t.nodeValue);else{let n;for(n=t.firstChild;n;n=n.nextSibling)Tr(n,e,r)}return r}function ho(t){return"documentElement"in t}function mo(t){return new DOMParser().parseFromString(t,"application/xml")}function ut(t,e){return function(r,n){const i=t.call(e!==void 0?e:this,r,n);i!==void 0&&n[n.length-1].push(i)}}function U(t,e,r){return function(n,i){const o=t.call(r!==void 0?r:this,n,i);if(o!==void 0){const a=i[i.length-1],s=e!==void 0?e:n.localName;let l;s in a?l=a[s]:(l=[],a[s]=l),l.push(o)}}}function p(t,e,r){return function(n,i){const o=t.call(r!==void 0?r:this,n,i);if(o!==void 0){const a=i[i.length-1],s=e!==void 0?e:n.localName;a[s]=o}}}function T(t,e,r){r=r!==void 0?r:{};let n,i;for(n=0,i=t.length;n<i;++n)r[t[n]]=e;return r}function go(t,e,r,n){let i;for(i=e.firstElementChild;i;i=i.nextElementSibling){const o=t[i.namespaceURI];if(o!==void 0){const a=o[i.localName];a!==void 0&&a.call(n,i,r)}}}function A(t,e,r,n,i){return n.push(t),go(e,r,n,i),n.pop()}class br{read(e){if(!e)return null;if(typeof e=="string"){const r=mo(e);return this.readFromDocument(r)}return ho(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let r=e.firstChild;r;r=r.nextSibling)if(r.nodeType==Node.ELEMENT_NODE)return this.readFromNode(r);return null}readFromNode(e){fo()}}const So="http://www.w3.org/1999/xlink";function Tt(t){return t.getAttributeNS(So,"href")}function vo(t){const e=Et(t,!1);return Eo(e)}function Eo(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function K(t){const e=Et(t,!1);return To(e)}function To(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function v(t){return Et(t,!1).trim()}const L=[null,"http://www.opengis.net/ows/1.1"],bo=T(L,{ServiceIdentification:p(ko),ServiceProvider:p(Zo),OperationsMetadata:p(Vo)});class xo extends br{constructor(){super()}readFromNode(e){const r=A({},bo,e,[]);return r||null}}const Ao=T(L,{DeliveryPoint:p(v),City:p(v),AdministrativeArea:p(v),PostalCode:p(v),Country:p(v),ElectronicMailAddress:p(v)}),Po=T(L,{Value:U(jo)}),wo=T(L,{AllowedValues:p(Go)}),Oo=T(L,{Phone:p(Ho),Address:p(Lo)}),_o=T(L,{HTTP:p(Yo)}),Ro=T(L,{Get:U(Wo),Post:void 0}),Io=T(L,{DCP:p(Bo)}),Mo=T(L,{Operation:zo}),Fo=T(L,{Voice:p(v),Facsimile:p(v)}),Co=T(L,{Constraint:U(Uo)}),No=T(L,{IndividualName:p(v),PositionName:p(v),ContactInfo:p(Xo)}),$o=T(L,{Abstract:p(v),AccessConstraints:p(v),Fees:p(v),Title:p(v),ServiceTypeVersion:p(v),ServiceType:p(v)}),Do=T(L,{ProviderName:p(v),ProviderSite:p(Tt),ServiceContact:p(qo)});function Lo(t,e){return A({},Ao,t,e)}function Go(t,e){return A({},Po,t,e)}function Uo(t,e){const r=t.getAttribute("name");if(r)return A({name:r},wo,t,e)}function Xo(t,e){return A({},Oo,t,e)}function Bo(t,e){return A({},_o,t,e)}function Wo(t,e){const r=Tt(t);if(r)return A({href:r},Co,t,e)}function Yo(t,e){return A({},Ro,t,e)}function zo(t,e){const r=t.getAttribute("name"),n=A({},Io,t,e);if(!n)return;const i=e[e.length-1];i[r]=n}function Vo(t,e){return A({},Mo,t,e)}function Ho(t,e){return A({},Fo,t,e)}function ko(t,e){return A({},$o,t,e)}function qo(t,e){return A({},No,t,e)}function Zo(t,e){return A({},Do,t,e)}function jo(t,e){return v(t)}const M={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Qo(t){const e=Ar();for(let r=0,n=t.length;r<n;++r)ea(e,t[r]);return e}function Jo(t,e,r){const n=Math.min.apply(null,t),i=Math.min.apply(null,e),o=Math.max.apply(null,t),a=Math.max.apply(null,e);return bt(n,i,o,a,r)}function xr(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function jt(t,e){const r=t[0],n=t[1],i=t[2],o=t[3],a=e[0],s=e[1];let l=M.UNKNOWN;return a<r?l=l|M.LEFT:a>i&&(l=l|M.RIGHT),s<n?l=l|M.BELOW:s>o&&(l=l|M.ABOVE),l===M.UNKNOWN&&(l=M.INTERSECTING),l}function Ar(){return[1/0,1/0,-1/0,-1/0]}function bt(t,e,r,n,i){return i?(i[0]=t,i[1]=e,i[2]=r,i[3]=n,i):[t,e,r,n]}function Ko(t){return bt(1/0,1/0,-1/0,-1/0,t)}function ea(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function ta(t,e,r,n,i){for(;r<n;r+=i)ra(t,e[r],e[r+1]);return t}function ra(t,e,r){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],r),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],r)}function na(t){return[t[0],t[3]]}function ia(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function oa(t){return t[2]<t[0]||t[3]<t[1]}function aa(t,e,r){let n=!1;const i=jt(t,e),o=jt(t,r);if(i===M.INTERSECTING||o===M.INTERSECTING)n=!0;else{const a=t[0],s=t[1],l=t[2],u=t[3],f=e[0],y=e[1],c=r[0],m=r[1],h=(m-y)/(c-f);let E,P;o&M.ABOVE&&!(i&M.ABOVE)&&(E=c-(m-u)/h,n=E>=a&&E<=l),!n&&o&M.RIGHT&&!(i&M.RIGHT)&&(P=m-(c-l)*h,n=P>=s&&P<=u),!n&&o&M.BELOW&&!(i&M.BELOW)&&(E=c-(m-s)/h,n=E>=a&&E<=l),!n&&o&M.LEFT&&!(i&M.LEFT)&&(P=m-(c-a)*h,n=P>=s&&P<=u)}return n}function la(t,e,r,n){if(oa(t))return Ko(r);let i=[];if(n>1){const s=t[2]-t[0],l=t[3]-t[1];for(let u=0;u<n;++u)i.push(t[0]+s*u/n,t[1],t[2],t[1]+l*u/n,t[2]-s*u/n,t[3],t[0],t[3]-l*u/n)}else i=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(i,i,2);const o=[],a=[];for(let s=0,l=i.length;s<l;s+=2)o.push(i[s]),a.push(i[s+1]);return Jo(o,a,r)}const H=[null,"http://www.opengis.net/wmts/1.0"],ve=[null,"http://www.opengis.net/ows/1.1"],sa=T(H,{Contents:p(Ea)});class ua extends br{constructor(){super(),this.owsParser_=new xo}readFromNode(e){let r=e.getAttribute("version");r&&(r=r.trim());let n=this.owsParser_.readFromNode(e);return n?(n.version=r,n=A(n,sa,e,[]),n||null):null}}const fa=T(H,{Layer:U(Ta),TileMatrixSet:U(ba)}),ca=T(H,{Style:U(xa),Format:U(v),TileMatrixSetLink:U(Aa),Dimension:U(Pa),ResourceURL:U(wa)},T(ve,{Title:p(v),Abstract:p(v),WGS84BoundingBox:p(Pr),Identifier:p(v)})),pa=T(H,{LegendURL:U(Oa)},T(ve,{Title:p(v),Identifier:p(v)})),ya=T(H,{TileMatrixSet:p(v),TileMatrixSetLimits:p(Ra)}),da=T(H,{TileMatrixLimits:ut(Ia)}),ha=T(H,{TileMatrix:p(v),MinTileRow:p(K),MaxTileRow:p(K),MinTileCol:p(K),MaxTileCol:p(K)}),ma=T(H,{Default:p(v),Value:U(v)},T(ve,{Identifier:p(v)})),ga=T(ve,{LowerCorner:ut(ft),UpperCorner:ut(ft)}),Sa=T(H,{WellKnownScaleSet:p(v),TileMatrix:U(_a)},T(ve,{SupportedCRS:p(v),Identifier:p(v),BoundingBox:p(Pr)})),va=T(H,{TopLeftCorner:p(ft),ScaleDenominator:p(vo),TileWidth:p(K),TileHeight:p(K),MatrixWidth:p(K),MatrixHeight:p(K)},T(ve,{Identifier:p(v)}));function Ea(t,e){return A({},fa,t,e)}function Ta(t,e){return A({},ca,t,e)}function ba(t,e){return A({},Sa,t,e)}function xa(t,e){const r=A({},pa,t,e);if(!r)return;const n=t.getAttribute("isDefault")==="true";return r.isDefault=n,r}function Aa(t,e){return A({},ya,t,e)}function Pa(t,e){return A({},ma,t,e)}function wa(t,e){const r=t.getAttribute("format"),n=t.getAttribute("template"),i=t.getAttribute("resourceType"),o={};return r&&(o.format=r),n&&(o.template=n),i&&(o.resourceType=i),o}function Pr(t,e){const r=A([],ga,t,e);if(r.length==2)return Qo(r)}function Oa(t,e){const r={};return r.format=t.getAttribute("format"),r.href=Tt(t),r}function ft(t,e){const r=v(t).split(/\s+/);if(!r||r.length!=2)return;const n=+r[0],i=+r[1];if(!(isNaN(n)||isNaN(i)))return[n,i]}function _a(t,e){return A({},va,t,e)}function Ra(t,e){return A([],da,t,e)}function Ia(t,e){return A({},ha,t,e)}const Ma=ua,Fa={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class wr{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Fa[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Oe=6378137,pe=Math.PI*Oe,Ca=[-pe,-pe,pe,pe],Na=[-180,-85,180,85],Me=Oe*Math.log(Math.tan(Math.PI/2));class se extends wr{constructor(e){super({code:e,units:"m",extent:Ca,global:!0,worldExtent:Na,getPointResolution:function(r,n){return r/Math.cosh(n[1]/Oe)}})}}const Qt=[new se("EPSG:3857"),new se("EPSG:102100"),new se("EPSG:102113"),new se("EPSG:900913"),new se("http://www.opengis.net/def/crs/EPSG/0/3857"),new se("http://www.opengis.net/gml/srs/epsg.xml#3857")];function $a(t,e,r){const n=t.length;r=r>1?r:2,e===void 0&&(r>2?e=t.slice():e=new Array(n));for(let i=0;i<n;i+=r){e[i]=pe*t[i]/180;let o=Oe*Math.log(Math.tan(Math.PI*(+t[i+1]+90)/360));o>Me?o=Me:o<-Me&&(o=-Me),e[i+1]=o}return e}function Da(t,e,r){const n=t.length;r=r>1?r:2,e===void 0&&(r>2?e=t.slice():e=new Array(n));for(let i=0;i<n;i+=r)e[i]=180*t[i]/pe,e[i+1]=360*Math.atan(Math.exp(t[i+1]/Oe))/Math.PI-90;return e}const La=6378137,Jt=[-180,-90,180,90],Ga=Math.PI*La/180;class te extends wr{constructor(e,r){super({code:e,units:"degrees",extent:Jt,axisOrientation:r,global:!0,metersPerUnit:Ga,worldExtent:Jt})}}const Kt=[new te("CRS:84"),new te("EPSG:4326","neu"),new te("urn:ogc:def:crs:OGC:1.3:CRS84"),new te("urn:ogc:def:crs:OGC:2:84"),new te("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new te("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new te("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ct={};function Ua(t){return ct[t]||ct[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Xa(t,e){ct[t]=e}let de={};function We(t,e,r){const n=t.getCode(),i=e.getCode();n in de||(de[n]={}),de[n][i]=r}function Ba(t,e){let r;return t in de&&e in de[t]&&(r=de[t][e]),r}function Wa(t,e,r){return Math.min(Math.max(t,e),r)}function Or(t,e){const r=Math.pow(10,e);return Math.round(t*r)/r}function Fe(t,e){return Math.floor(Or(t,e))}function Ce(t,e){return Math.ceil(Or(t,e))}function xt(t,e){if(e!==void 0){for(let r=0,n=t.length;r<n;++r)e[r]=t[r];e=e}else e=t.slice();return e}function Ya(t,e){if(e!==void 0&&t!==e){for(let r=0,n=t.length;r<n;++r)e[r]=t[r];t=e}return t}function za(t){Xa(t.getCode(),t),We(t,t,xt)}function Va(t){t.forEach(za)}function Q(t){return typeof t=="string"?Ua(t):t||null}function er(t){Va(t),t.forEach(function(e){t.forEach(function(r){e!==r&&We(e,r,xt)})})}function Ha(t,e,r,n){t.forEach(function(i){e.forEach(function(o){We(i,o,r),We(o,i,n)})})}function tr(t,e){if(t===e)return!0;const r=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||_r(t,e)===xt)&&r}function _r(t,e){const r=t.getCode(),n=e.getCode();let i=Ba(r,n);return i||(i=Ya),i}function ka(t,e){const r=Q(t),n=Q(e);return _r(r,n)}function qa(t,e,r,n){const i=ka(e,r);return la(t,i,void 0,n)}function Za(){er(Qt),er(Kt),Ha(Kt,Qt,$a,Da)}Za();function Te(t,e){if(!t)throw new Error(e)}function rr(t,e,r,n){return n!==void 0?(n[0]=t,n[1]=e,n[2]=r,n):[t,e,r]}class Rr{constructor(e,r,n,i){this.minX=e,this.maxX=r,this.minY=n,this.maxY=i}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,r){return this.minX<=e&&e<=this.maxX&&this.minY<=r&&r<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function ue(t,e,r,n,i){return i!==void 0?(i.minX=t,i.maxX=e,i.minY=r,i.maxY=n,i):new Rr(t,e,r,n)}const ja=256;function Qa(t,e,r,n,i){let o;for(e+=n;e<r;e+=n)if(o=i(t.slice(e-n,e),t.slice(e,e+n)),o)return o;return!1}function Ne(t,e,r,n,i,o){let a=0,s=t[r-n],l=t[r-n+1];for(;e<r;e+=n){const u=t[e],f=t[e+1];l<=o?f>o&&(u-s)*(o-l)-(i-s)*(f-l)>0&&a++:f<=o&&(u-s)*(o-l)-(i-s)*(f-l)<0&&a--,s=u,l=f}return a!==0}function Ja(t,e,r,n,i){const o=ta(Ar(),t,e,r,n);return ia(i,o)?xr(i,o)||o[0]>=i[0]&&o[2]<=i[2]||o[1]>=i[1]&&o[3]<=i[3]?!0:Qa(t,e,r,n,function(a,s){return aa(i,a,s)}):!1}function Ka(t,e,r,n,i){return!!(Ja(t,e,r,n,i)||Ne(t,e,r,n,i[0],i[1])||Ne(t,e,r,n,i[0],i[3])||Ne(t,e,r,n,i[2],i[1])||Ne(t,e,r,n,i[2],i[3]))}function $e(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}const fe=[0,0,0],Z=5;class el{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Te(yo(this.resolutions_,(i,o)=>o-i,!0),"`resolutions` must be sorted in descending order");let r;if(!e.origins){for(let i=0,o=this.resolutions_.length-1;i<o;++i)if(!r)r=this.resolutions_[i]/this.resolutions_[i+1];else if(this.resolutions_[i]/this.resolutions_[i+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Te(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=na(n)),Te(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Te(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:ja,Te(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((i,o)=>{const a=new Rr(Math.min(0,i[0]),Math.max(i[0]-1,-1),Math.min(0,i[1]),Math.max(i[1]-1,-1));if(n){const s=this.getTileRangeForExtentAndZ(n,o);a.minX=Math.max(s.minX,a.minX),a.maxX=Math.min(s.maxX,a.maxX),a.minY=Math.max(s.minY,a.minY),a.maxY=Math.min(s.maxY,a.maxY)}return a}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,r,n){const i=this.getTileRangeForExtentAndZ(e,r);for(let o=i.minX,a=i.maxX;o<=a;++o)for(let s=i.minY,l=i.maxY;s<=l;++s)n([r,o,s])}forEachTileCoordParentTileRange(e,r,n,i){let o,a,s,l=null,u=e[0]-1;for(this.zoomFactor_===2?(a=e[1],s=e[2]):l=this.getTileCoordExtent(e,i);u>=this.minZoom;){if(a!==void 0&&s!==void 0?(a=Math.floor(a/2),s=Math.floor(s/2),o=ue(a,a,s,s,n)):o=this.getTileRangeForExtentAndZ(l,u,n),r(u,o))return!0;--u}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,r,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const o=e[1]*2,a=e[2]*2;return ue(o,o+1,a,a+1,r)}const i=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,e[0]+1,r)}return null}getTileRangeForTileCoordAndZ(e,r,n){if(r>this.maxZoom||r<this.minZoom)return null;const i=e[0],o=e[1],a=e[2];if(r===i)return ue(o,a,o,a,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,r-i),u=Math.floor(o*l),f=Math.floor(a*l);if(r<i)return ue(u,u,f,f,n);const y=Math.floor(l*(o+1))-1,c=Math.floor(l*(a+1))-1;return ue(u,y,f,c,n)}const s=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,r,n)}getTileRangeForExtentAndZ(e,r,n){this.getTileCoordForXYAndZ_(e[0],e[3],r,!1,fe);const i=fe[1],o=fe[2];this.getTileCoordForXYAndZ_(e[2],e[1],r,!0,fe);const a=fe[1],s=fe[2];return ue(i,a,o,s,n)}getTileCoordCenter(e){const r=this.getOrigin(e[0]),n=this.getResolution(e[0]),i=$e(this.getTileSize(e[0]),this.tmpSize_);return[r[0]+(e[1]+.5)*i[0]*n,r[1]-(e[2]+.5)*i[1]*n]}getTileCoordExtent(e,r){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),o=$e(this.getTileSize(e[0]),this.tmpSize_),a=n[0]+e[1]*o[0]*i,s=n[1]-(e[2]+1)*o[1]*i,l=a+o[0]*i,u=s+o[1]*i;return bt(a,s,l,u,r)}getTileCoordForCoordAndResolution(e,r,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],r,!1,n)}getTileCoordForXYAndResolution_(e,r,n,i,o){const a=this.getZForResolution(n),s=n/this.getResolution(a),l=this.getOrigin(a),u=$e(this.getTileSize(a),this.tmpSize_);let f=s*(e-l[0])/n/u[0],y=s*(l[1]-r)/n/u[1];return i?(f=Ce(f,Z)-1,y=Ce(y,Z)-1):(f=Fe(f,Z),y=Fe(y,Z)),rr(a,f,y,o)}getTileCoordForXYAndZ_(e,r,n,i,o){const a=this.getOrigin(n),s=this.getResolution(n),l=$e(this.getTileSize(n),this.tmpSize_);let u=(e-a[0])/s/l[0],f=(a[1]-r)/s/l[1];return i?(u=Ce(u,Z)-1,f=Ce(f,Z)-1):(u=Fe(u,Z),f=Fe(f,Z)),rr(n,u,f,o)}getTileCoordForCoordAndZ(e,r,n){return this.getTileCoordForXYAndZ_(e[0],e[1],r,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,r){const n=po(this.resolutions_,e,r||0);return Wa(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,r){return Ka(r,0,r.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const r=this.resolutions_.length,n=new Array(r);for(let i=this.minZoom;i<r;++i)n[i]=this.getTileRangeForExtentAndZ(e,i);this.fullTileRanges_=n}}class tl extends el{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function rl(t,e,r){const n=[],i=[],o=[],a=[],s=[];r=r!==void 0?r:[];const l="SupportedCRS",u="TileMatrix",f="Identifier",y="ScaleDenominator",c="TopLeftCorner",m="TileWidth",h="TileHeight",E=t[l],P=Q(E),g=P.getMetersPerUnit(),O=P.getAxisOrientation().substr(0,2)=="ne";return t[u].sort(function(x,I){return I[y]-x[y]}),t[u].forEach(function(x){let I;if(r.length>0?I=r.find(function(G){return x[f]==G[u]?!0:x[f].includes(":")?!1:t[f]+":"+x[f]===G[u]}):I=!0,I){i.push(x[f]);const G=x[y]*28e-5/g,W=x[m],w=x[h];O?o.push([x[c][1],x[c][0]]):o.push(x[c]),n.push(G),a.push(W==w?W:[W,w]),s.push([x.MatrixWidth,x.MatrixHeight])}}),new tl({extent:e,origins:o,resolutions:n,matrixIds:i,tileSizes:a,sizes:s})}function nl(t,e){const n=t.Contents.Layer.find(function(d){return d.Identifier==e.layer});if(!n)return null;const i=t.Contents.TileMatrixSet;let o;n.TileMatrixSetLink.length>1?"projection"in e?o=n.TileMatrixSetLink.findIndex(function(d){const D=i.find(function(Ye){return Ye.Identifier==d.TileMatrixSet}).SupportedCRS,Y=Q(D),F=Q(e.projection);return Y&&F?tr(Y,F):D==e.projection}):o=n.TileMatrixSetLink.findIndex(function(d){return d.TileMatrixSet==e.matrixSet}):o=0,o<0&&(o=0);const a=n.TileMatrixSetLink[o].TileMatrixSet,s=n.TileMatrixSetLink[o].TileMatrixSetLimits;let l=n.Format[0];"format"in e&&(l=e.format),o=n.Style.findIndex(function(d){return"style"in e?d.Title==e.style:d.isDefault}),o<0&&(o=0);const u=n.Style[o].Identifier,f={};"Dimension"in n&&n.Dimension.forEach(function(d,b,D){const Y=d.Identifier;let F=d.Default;F===void 0&&(F=d.Value[0]),f[Y]=F});const c=t.Contents.TileMatrixSet.find(function(d){return d.Identifier==a});let m;const h=c.SupportedCRS;if(h&&(m=Q(h)),"projection"in e){const d=Q(e.projection);d&&(!m||tr(d,m))&&(m=d)}let E=!1;const P=m.getAxisOrientation().substr(0,2)=="ne";let g=c.TileMatrix[0],O={MinTileCol:0,MinTileRow:0,MaxTileCol:g.MatrixWidth-1,MaxTileRow:g.MatrixHeight-1};if(s){O=s[s.length-1];const d=c.TileMatrix.find(b=>b.Identifier===O.TileMatrix||c.Identifier+":"+b.Identifier===O.TileMatrix);d&&(g=d)}const x=g.ScaleDenominator*28e-5/m.getMetersPerUnit(),I=P?[g.TopLeftCorner[1],g.TopLeftCorner[0]]:g.TopLeftCorner,G=g.TileWidth*x,W=g.TileHeight*x;let w=c.BoundingBox;w&&P&&(w=[w[1],w[0],w[3],w[2]]);let X=[I[0]+G*O.MinTileCol,I[1]-W*(1+O.MaxTileRow),I[0]+G*(1+O.MaxTileCol),I[1]-W*O.MinTileRow];if(w!==void 0&&!xr(w,X)){const d=n.WGS84BoundingBox,b=Q("EPSG:4326").getExtent();if(X=w,d)E=d[0]===b[0]&&d[2]===b[2];else{const D=qa(w,c.SupportedCRS,"EPSG:4326");E=D[0]-1e-10<=b[0]&&D[2]+1e-10>=b[2]}}const q=rl(c,X,s),B=[];let $=e.requestEncoding;if($=$!==void 0?$:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata){const d=t.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let b=0,D=d.length;b<D;++b)if(d[b].Constraint){const F=d[b].Constraint.find(function(Ye){return Ye.name=="GetEncoding"}).AllowedValues.Value;if($===""&&($=F[0]),$==="KVP")F.includes("KVP")&&B.push(d[b].href);else break}else d[b].href&&($="KVP",B.push(d[b].href))}return B.length===0&&($="REST",n.ResourceURL.forEach(function(d){d.resourceType==="tile"&&(l=d.format,B.push(d.template))})),{urls:B,layer:e.layer,matrixSet:a,format:l,projection:m,requestEncoding:$,tileGrid:q,style:u,dimensions:f,wrapX:E,crossOrigin:e.crossOrigin}}const il=new Ma,ol=Nr({name:"VaGeoserverVectorTileLayer",components:{VaVectorTileLayer:Zr},props:Jr,emits:Kr,setup(t){const e=$r({}),r=Dr(!0);t.optionsFromCapabilities&&(r.value=!1,s().then(async()=>{await At(),r.value=!0}),Pt(()=>[t.url,t.layerId,t.tileMatrixSetId],s));const{interceptorToggle:n}=qr({urls:[new RegExp(`${t.url}.*FORMAT=application%2Fvnd.mapbox-vector-tile`)],before:l=>{const u=uo.parse(l.url),f=l.requestOptions;f.query||(f.query={});const y=f.query;y.TILEMATRIX=`${u.TILEMATRIXSET}:${u.TILEMATRIX}`}});n.add();const i=ze(()=>{const l=t.tileInfo||e.tileInfo;if(!l)return"";const u=t.fullExtent,f=wt(t,l,u);return URL.createObjectURL(new Blob([JSON.stringify(f)],{type:"application/json"}))}),o=ze(()=>{const l={type:"vector"};return i.value?l.url=i.value:l.tiles=wt(t).tiles,l}),a=ze(()=>({version:8,sources:{esri:o.value},layers:[{id:"main",type:"fill","source-layer":t.layerId.split(":")[1],source:"esri",paint:{"fill-color":"#088","fill-outline-color":"green"},...t.defaultLayerOptions}]}));Pt(()=>a.value,async()=>{r.value=!1,await At(),r.value=!0});async function s(){return Lr(t.url,{responseType:"text",query:{SERVICE:"WMTS",REQUEST:"GetCapabilities"}}).then(l=>{const u=il.read(l.data);return[nl(u,{layer:t.layerId,matrixSet:t.tileMatrixSetId}),u]}).then(([l,u])=>{if(!l)return console.warn(`No capabilities found for layer ${t.layerId} in ${t.url}`);const f=u.Contents.TileMatrixSet.find(h=>h.Identifier===t.tileMatrixSetId);if(!f)return console.warn(`No tileMatrixSet found for layer ${t.layerId} in ${t.url}`);const y=f.SupportedCRS.split(":").pop(),c=f.TileMatrix,m=new Gr({lods:c.map((h,E)=>({level:E,resolution:l.tileGrid.getResolution(E),scale:h.ScaleDenominator,rows:h.MatrixHeight,cols:h.MatrixWidth,origin:l.tileGrid.getOrigin(E)})),size:[l.tileGrid.getTileSize(0),l.tileGrid.getTileSize(1)],spatialReference:{wkid:y}});e.tileInfo=m})}return{layerStyle:a,ready:r}}});function al(t,e,r,n,i,o){const a=Xr("VaVectorTileLayer");return t.ready?(Br(),Wr(a,{key:0,style:Vr(t.layerStyle)},{default:Yr(()=>[zr(t.$slots,"default")]),_:3},8,["style"])):Hr("",!0)}const et=Ur(ol,[["render",al]]);et.install=t=>{t.component(et.name,et)};export{et as V};
