import{gj as _,gp as d,y as h,P as g,gl as w,l2 as V,gz as T,gv as f,kY as b,gq as v,gr as F,gw as s,gs as e,gy as n,gF as L,gx as x}from"./chunk-m3jlTyOz.js";import{V as I,s as P}from"./chunk-KeaEG4wt.js";import"./chunk-UGOwPU3E.js";import{R as $}from"./chunk-KpbMssn-.js";import"./chunk-oGKzQC3o.js";import"./chunk-6X9x_0d8.js";import"./chunk-3GvsUVmQ.js";import"./chunk-U2Z5ktuv.js";import"./chunk-DeWxgD7-.js";import"./chunk-nNlOgSV0.js";import"./chunk-4qZjGCqj.js";import"./chunk-RTwjkWjX.js";import{V as j}from"./chunk-Lc4GdXmF.js";import"./chunk-nhwCGmT6.js";import"./chunk-T8_LR2t6.js";import"./chunk-zOlTYYDb.js";import"./chunk-LjxQUu5l.js";import{V as k}from"./chunk-Hi7r9wTp.js";import"./chunk-zrR492Xi.js";import"./chunk-aJpKuiq7.js";import"./chunk-24hRBvY-.js";import"./chunk-131vpUfe.js";import"./chunk-kwsD9PUK.js";import"./chunk-Q_TLMJUJ.js";import"./chunk-BeDcbgl5.js";import{V as S}from"./chunk-sfFU6-Mp.js";import"./chunk-x8z7gOoH.js";import"./chunk-S9ymn42W.js";import"./chunk-9RnNHQJS.js";import"./chunk-K9wJ12yw.js";import"./chunk-8OL3C21f.js";import"./chunk-PkkKrSru.js";import"./chunk-4yxc2Cvb.js";import"./chunk-GOM-R-0H.js";import"./chunk-7S1ORVVc.js";import"./chunk-lNvIraYK.js";import"./chunk-UXKc4dP8.js";import"./chunk-BOPyiqs1.js";import{V as R}from"./chunk-Q1tSpxoH.js";import"./chunk-QMFf98LH.js";import"./chunk-Li0vNNJ0.js";import{u as B}from"./chunk-ddV5Ho3e.js";import"./chunk-bntHIBZM.js";import"./chunk-u8xdCC6Y.js";import"./chunk-sx_5tzRY.js";import"./chunk-dfbnxT3d.js";import"./chunk-3E9jM2aR.js";import"./chunk-mzuyEGLb.js";import"./chunk-NMVZqJQc.js";import"./chunk-Ts4GXi8B.js";import"./chunk-UIYUfr_z.js";import"./chunk-gulYoy5Z.js";import"./chunk-08c5rnJX.js";import"./chunk-xESNvpj7.js";import"./chunk-yAT8stFn.js";import"./chunk-b58agXUN.js";import"./chunk-xi9lM-xU.js";import"./chunk-yFbf1y_K.js";import"./chunk-ccEmCESr.js";import"./chunk-5gr_71sf.js";function E(){const t=_("vaPopupTemplate");if(!t)throw new Error("The component which use usePopupTemplate() must be in a PopupTemplate component");return t}const y="http://t1.zjsophon.com:10000/geoserver",O=new $({baseURL:y,setRequestInit(t){return t.headers,t}}),W=t=>O.request(t),q=()=>W({method:"GET",url:"/rest/layers.json"}).then(t=>t.layers.layer),D={defaultOptions:{type:Object,default:()=>({})}},N={load:t=>t},U=d({name:"VaWmsLayerPopupTemplate",emits:N,props:D,setup(t,{emit:l}){const o=B(),i=o.fetchFeatureInfoFunction,p=E();return o.fetchFeatureInfoFunction=async m=>{m.info_format="application/json",m.feature_count=5;const{data:a}=await h(o.featureInfoUrl,{query:m});return a.features.map(r=>new g({attributes:r.properties,popupTemplate:p}))},w(()=>{o.fetchFeatureInfoFunction=i}),{popupTemplate:p}}});function z(t,l,o,i,p,m){return T(t.$slots,"default")}const u=V(U,[["render",z]]);u.install=t=>{t.component(u.name,u)};const Kt=d({__name:"index",setup(t){const l=async a=>{const r=a.view;await a.layer.when(),r.goTo(a.layer.fullExtent)},o=f([]),i=f([{templateType:"VkfSelect",prop:"name",filterable:!0,options:o}]),p=b({name:"pub:O3_predict_20220301"});m();function m(){q().then(a=>{o.value=a.map(r=>({label:r.name,value:r.name}))})}return(a,r)=>(v(),F(e(k),null,{before:s(()=>[n(e(I),{formItems:i.value,data:e(p),onSetData:r[0]||(r[0]=c=>e(P)(e(p),c))},null,8,["formItems","data"])]),default:s(()=>[n(e(j),{type:"vec_c",anno:!1,"spatial-reference":{wkid:4490}}),n(e(R),{url:e(y)+"/ows",onLoad:l,sublayers:[{name:e(p).name,queryable:!0,popupEnabled:!0}]},{default:s(()=>[n(e(S),{orphan:!0},{plugins:s(()=>[n(e(u))]),default:s(({attributes:c})=>[x(L(c),1)]),_:1})]),_:1},8,["url","sublayers"])]),_:1}))}});export{Kt as default};
