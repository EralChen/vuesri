import{p as E,e as b,_ as R,c as L,a as S}from"./chunk-80lo0Aq7.js";import{a as m,t as y}from"./chunk-AKBpUdIm.js";import{b as r}from"./chunk-2bs7e3B8.js";import{h2 as h,ly as T,bA as I,h8 as $,h3 as k,oH as _,lH as w,hf as O,h5 as V,h6 as v,h9 as g,hc as W,lJ as C,oE as A,hn as M}from"./chunk-gZYsZ36N.js";const P={...E,type:{type:String,default:"img_c"},spatialReference:{type:Object,default:()=>({wkid:4326})},token:{type:String,default:"f0175927031c1e12cb804b0c3b8cce4d"},minScale:{type:Number,default:m[1]},maxScale:{type:Number,default:m[18]}},x={...b},N={4326:y,4490:y,3857:r,102100:r,4549:r},B=h({name:"VaTdtWebTileLayer",components:{VaWebTileLayer:R},props:P,emits:x,setup(e,{emit:c}){const f=["t0","t1","t2","t3","t4","t5","t6","t7"],n=T(()=>{const a=e.type.split("_"),t=a[0],s=a[1];return{baseLayer:t,typeSR:s}}),u=T(()=>{const a=e.spatialReference.wkid,t=N[a],s={origin:t.origin,spatialReference:e.spatialReference};s.lods=t.lods.slice(1,19);const d={subDomains:f,urlTemplate:`https://{subDomain}.tianditu.gov.cn/${e.type}/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=${n.value.baseLayer}&STYLE=default&TILEMATRIXSET=${n.value.typeSR}&FORMAT=tiles&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}&tk=${e.token}`,tileInfo:s,spatialReference:e.spatialReference,...e.defaultOptions};return t.fullExtent&&(d.fullExtent=new I({...t.fullExtent,spatialReference:e.spatialReference})),d}),p=L(e,["defaultOptions"]),o=S(c),l=$(!0);return k(()=>e.type,async()=>{l.value=!1,await _(),l.value=!0}),{defaultOptions:u,coreProps:p,coreEmits:o,ready:l}}});function H(e,c,f,n,u,p){const o=O("VaWebTileLayer");return e.ready?(V(),v(o,C({key:0,"default-options":e.defaultOptions},e.coreProps,A(e.coreEmits)),{default:g(()=>[W(e.$slots,"default")]),_:3},16,["default-options"])):M("",!0)}const i=w(B,[["render",H]]);i.install=e=>{e.component(i.name,i)};export{i as V};
