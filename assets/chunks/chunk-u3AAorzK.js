import{V as _}from"./chunk-gOzRnZOw.js";import{V as b}from"./chunk-eL7rTImP.js";import{V as h}from"./chunk-o5a-jOIG.js";import{gY as w,h2 as y,lF as V,g_ as k,g$ as x,lH as S,hc as g,fK as C,bG as $,h8 as M,hf as E,h5 as B,h6 as O,h9 as a,hh as T,ha as s,hb as d,h7 as c}from"./chunk-gZYsZ36N.js";import{V as F}from"./chunk-OD9jrjV5.js";import{u as H}from"./chunk-5yhB8Y-n.js";import{s as L}from"./chunk-B3AFDltd.js";import{e as N,c as j}from"./chunk-jDrT5IC_.js";import"./chunk-pR8IN3Kg.js";import"./chunk-AKBpUdIm.js";import"./chunk-8dd3L-WV.js";import"./chunk-GWlnAQeV.js";import"./chunk-80lo0Aq7.js";import"./chunk-2bs7e3B8.js";import"./chunk-MEWVNnB1.js";import"./chunk-_piOf1Cc.js";import"./chunk-0BkBQc93.js";import"./chunk-iaPf1V3f.js";import"./chunk-t4TbIqUg.js";import"./chunk-_rTpuW4M.js";import"./chunk-u9gmVhyK.js";function q(){const t=w("vaSublayer");if(!t)throw new Error("The component which use useSublayer() must be in a  Sublayer component");return t}const A={modelValue:{type:Object,default:()=>({})}},U={click:t=>t},z=y({name:"VaSublayerOnClick",props:A,emits:U,setup(t,{emit:u}){const i=q(),r=H(),m=r[L],o=j(m),e=new o("click",n=>{const l=i.createQuery(),v=N(r,{x:n.event.x,y:n.event.y});l.geometry=v,l.outFields=["*"],i.queryFeatures(l).then(f=>{u("click",{...n,featureSet:f,result:f.features[0],layer:i})})});return e.add(),V(()=>{e.remove()}),k(()=>{e.remove()}),x(()=>{e.add()}),{}}});function D(t,u,i,r,m,o){return g(t.$slots,"default")}const p=S(z,[["render",D]]);p.install=t=>{t.component(p.name,p)};const ue=y({__name:"index",setup(t){const u=async o=>{const e=o.view;await o.layer.when(),e.goTo(o.layer.fullExtent)},i=new C({symbol:new $({color:"red"})}),r=M("1=1"),m=o=>{console.log("onSublayerClick",o)};return(o,e)=>{const n=E("ElButton");return B(),O(c(_),{defaultOptions:{zoom:2}},{before:a(()=>[T("p",null,[s(n,{onClick:e[0]||(e[0]=l=>r.value="1=1")},{default:a(()=>[d("1 = 1")]),_:1}),s(n,{onClick:e[1]||(e[1]=l=>r.value="1=0")},{default:a(()=>[d("1 = 0")]),_:1}),s(n,{onClick:e[2]||(e[2]=l=>r.value="st='MO'")},{default:a(()=>[d("st = MO")]),_:1})])]),default:a(()=>[s(c(b),{type:"vec_w",anno:!1,"spatial-reference":{wkid:3857}}),s(c(h),{sublayers:[],url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",onLoad:u},{when:a(()=>[s(c(F),{id:0,renderer:c(i),visible:!0,definitionExpression:r.value},{default:a(()=>[s(c(p),{onClick:m})]),_:1},8,["renderer","definitionExpression"])]),_:1},8,["url"])]),_:1})}}});export{ue as default};
