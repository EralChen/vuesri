import{c as G,s as c}from"./chunk-3E9jM2aR.js";import{u as h}from"./chunk-OMr8FG4E.js";import{gm as y,mM as w,gs as g,l4 as b,gt as E,P as O,gn as m,l1 as V,l6 as $,gF as k,gv as H,gG as _,gA as j,nH as x,gC as R,gL as M}from"./chunk-ERvgPDZ8.js";import{c as T}from"./chunk-TReN2ucZ.js";import{b as B}from"./chunk-yl6pYqlf.js";function C(){const e=y("vaGraphic");if(!e)throw new Error("The component which use useGraphic() must be in a Graphic component");return e}const d={click:e=>e},F=w(d),l=g({emits:d,setup(e,{emit:a}){const t=h(),o=C(),r=t[G],s=T(r),n=new s("click",i=>{const{hitTestResult:v}=i,f=v.results;let p;f[0]?.graphic===o&&(p=f[0]),a("click",{...i,result:p,graphic:o})});return n.add(),b(()=>{n.remove()}),()=>null}});l.install=e=>{e.component(l.name,l)};const S={defaultOptions:{type:Object,default:()=>({})},geometry:{type:Object,default:null},symbol:{type:Object,default:()=>({type:"simple-marker",color:[226,119,40]})},attributes:{type:Object,default:()=>({})},visible:{type:Boolean,default:!0},spatialReference:{type:Object,default:void 0},index:{type:Number,default:void 0},orphan:{type:Boolean,default:!1}},A={...d,load:e=>e};function L(e,a,t){if(t.orphan)return;a[c]=t.index,e.add(a,t.index);const o=r=>{e.forEach(s=>{s[c]>r&&setTimeout(()=>{e.reorder(s,s[c])})})};typeof t.index=="number"&&o(t.index),E(()=>t.index,r=>{typeof r=="number"&&(a[c]=t.index,e.reorder(a,r),o(r))}),b(()=>{e.remove(a)})}const N=g({name:"VaGraphic",components:{VaGraphicHitEvents:l},emits:A,props:S,setup(e,{emit:a}){const t=h(),r=y("vaGraphicsLayer",null)?.graphics||t.graphics,s=F(a),n=new O({...e.defaultOptions});return B(n,e),m(()=>{const i=e.geometry?.spatialReference;n.geometry=e.geometry,!i&&n.geometry&&t.when(()=>{n.geometry.spatialReference=e.spatialReference||t.spatialReference})}),m(()=>{n.attributes=e.attributes}),m(()=>{e.symbol&&(n.symbol=e.symbol)}),L(r,n,e),V("vaGraphic",n),a("load",{view:t,graphic:n}),{eventsOnEmits:s,graphic:n}}});function I(e,a,t,o,r,s){const n=k("VaGraphicHitEvents");return H(),_(M,null,[j(n,x(e.eventsOnEmits),null,16),R(e.$slots,"default",{graphic:e.graphic,geometry:e.graphic.geometry,attributes:e.graphic.attributes})],64)}const u=$(N,[["render",I]]);u.install=e=>{e.component(u.name,u)};export{u as V};
