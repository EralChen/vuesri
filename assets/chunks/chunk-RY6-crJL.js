import{s as E,b as c}from"./chunk-B3AFDltd.js";import{u as p}from"./chunk-5yhB8Y-n.js";import{gY as y,nt as G,h2 as b,lF as g,h3 as w,D as O,gZ as m,lC as V,lH as $,hf as k,h5 as H,hg as _,ha as j,oE as x,hc as R,hl as T}from"./chunk-gZYsZ36N.js";import{c as B}from"./chunk-jDrT5IC_.js";import{u as M}from"./chunk-u9gmVhyK.js";function C(){const e=y("vaGraphic");if(!e)throw new Error("The component which use useGraphic() must be in a Graphic component");return e}const d={click:e=>e},F=G(d),l=b({emits:d,setup(e,{emit:n}){const t=p(),o=C(),r=t[E],s=B(r),a=new s("click",i=>{const{hitTestResult:v}=i,f=v.results;let h;f[0]?.graphic===o&&(h=f[0]),n("click",{...i,result:h,graphic:o})});return a.add(),g(()=>{a.remove()}),()=>null}});l.install=e=>{e.component(l.name,l)};const S={defaultOptions:{type:Object,default:()=>({})},geometry:{type:Object,default:null},symbol:{type:Object,default:()=>({type:"simple-marker",color:[226,119,40]})},attributes:{type:Object,default:()=>({})},visible:{type:Boolean,default:!0},spatialReference:{type:Object,default:void 0},index:{type:Number,default:void 0},orphan:{type:Boolean,default:!1}},N={...d,load:e=>e};function A(e,n,t){if(t.orphan)return;n[c]=t.index,e.add(n,t.index);const o=r=>{e.forEach(s=>{s[c]>r&&setTimeout(()=>{e.reorder(s,s[c])})})};typeof t.index=="number"&&o(t.index),w(()=>t.index,r=>{typeof r=="number"&&(n[c]=t.index,e.reorder(n,r),o(r))}),g(()=>{e.remove(n)})}const D=b({name:"VaGraphic",components:{VaGraphicHitEvents:l},emits:N,props:S,setup(e,{emit:n}){const t=p(),r=y("vaGraphicsLayer",null)?.graphics||t.graphics,s=F(n),a=new O({...e.defaultOptions});return M(a,e),m(()=>{const i=e.geometry?.spatialReference;a.geometry=e.geometry,!i&&a.geometry&&t.when(()=>{a.geometry.spatialReference=e.spatialReference||t.spatialReference})}),m(()=>{a.attributes=e.attributes}),m(()=>{e.symbol&&(a.symbol=e.symbol)}),A(r,a,e),V("vaGraphic",a),n("load",{view:t,graphic:a}),{eventsOnEmits:s,graphic:a}}});function I(e,n,t,o,r,s){const a=k("VaGraphicHitEvents");return H(),_(T,null,[j(a,x(e.eventsOnEmits),null,16),R(e.$slots,"default",{graphic:e.graphic,geometry:e.graphic.geometry,attributes:e.graphic.attributes})],64)}const u=$(D,[["render",I]]);u.install=e=>{e.component(u.name,u)};export{u as V};
