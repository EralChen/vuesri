import{gY as y,h2 as h,U as _,D as w,h0 as V,lG as b,hc as T,h8 as f,lw as v,h5 as F,h6 as L,h9 as s,ha as n,h7 as e,hb as $,hi as I}from"./chunk-xdbuWCSg.js";import{V as x,s as P}from"./chunk-pdaYqzVd.js";import"./chunk-QmLkA8vh.js";import{R as g}from"./chunk-KpbMssn-.js";import"./chunk-Rpg3QTvn.js";import"./chunk-loHR4y2p.js";import"./chunk-1yHvQV-p.js";import"./chunk-eGNVTRpg.js";import"./chunk-wJeQeX2q.js";import"./chunk-050oiI48.js";import"./chunk-lQU-EnPR.js";import"./chunk-rNHK9wJ6.js";import{V as S}from"./chunk-6o6tFwA-.js";import"./chunk-63AI7Hpr.js";import"./chunk-SUrPPh2b.js";import"./chunk-7sBGr7NW.js";import"./chunk-NoRKKJwn.js";import{V as j}from"./chunk-MP3SmEKf.js";import"./chunk-AQSXafU-.js";import"./chunk-ltK1s8nW.js";import"./chunk-Wzez7fEs.js";import"./chunk-0gozDf9n.js";import"./chunk-Di8tOJah.js";import"./chunk-7iy6_9MI.js";import"./chunk-1CE6gnXz.js";import{V as k}from"./chunk-z466LWxV.js";import"./chunk-HEOKg0WM.js";import"./chunk-ZkYYvP3a.js";import"./chunk-zegxIybi.js";import"./chunk-EraEGKU1.js";import"./chunk-61dhINtI.js";import"./chunk-3dUbQ6r4.js";import"./chunk-93_OmANW.js";import"./chunk-NILXTdrs.js";import"./chunk-9gCcGOc7.js";import"./chunk-xDUoadMJ.js";import"./chunk-UzJWYQNQ.js";import"./chunk-K71dfVM6.js";import{V as R}from"./chunk-ogNnWqfN.js";import"./chunk-hfdktSrh.js";import"./chunk-2aAZ5bZv.js";import{u as U}from"./chunk-LsewXPB6.js";import"./chunk-t4TbIqUg.js";import"./chunk-elC-BEzW.js";import"./chunk-A28ZiPww.js";import"./chunk-B3AFDltd.js";import"./chunk-gtyL-bMM.js";import"./chunk-X13qFF8j.js";import"./chunk-E7RiHwKi.js";import"./chunk-3xNmT1XT.js";import"./chunk-s4Wj1llY.js";import"./chunk-WbQr-OU9.js";import"./chunk-PXg3VzVx.js";import"./chunk-PYCr5Ivi.js";import"./chunk-PsIbZfTj.js";import"./chunk-TB-F49UB.js";import"./chunk-IoGt2n0v.js";import"./chunk-s1CWS4v1.js";import"./chunk-vUrHI-Qa.js";function B(){const t=y("vaPopupTemplate");if(!t)throw new Error("The component which use usePopupTemplate() must be in a PopupTemplate component");return t}const d="http://t1.zjsophon.com:10000/geoserver",D=new g({baseURL:d,setRequestInit(t){return t.headers,t}}),E=t=>D.request(t),O=()=>E({method:"GET",url:"/rest/layers.json"}).then(t=>t.layers.layer),W={defaultOptions:{type:Object,default:()=>({})}},N={load:t=>t},q=h({name:"VaWmsLayerPopupTemplate",emits:N,props:W,setup(t,{emit:l}){const r=U(),i=r.fetchFeatureInfoFunction,p=B();return r.fetchFeatureInfoFunction=async m=>{m.info_format="application/json",m.feature_count=5;const{data:a}=await _(r.featureInfoUrl,{query:m});return a.features.map(o=>new w({attributes:o.properties,popupTemplate:p}))},V(()=>{r.fetchFeatureInfoFunction=i}),{popupTemplate:p}}});function C(t,l,r,i,p,m){return T(t.$slots,"default")}const u=b(q,[["render",C]]);u.install=t=>{t.component(u.name,u)};const Jt=h({__name:"index",setup(t){const l=async a=>{const o=a.view;await a.layer.when(),o.goTo(a.layer.fullExtent)},r=f([]),i=f([{templateType:"VkfSelect",prop:"name",filterable:!0,options:r}]),p=v({name:"pub:O3_predict_20220301"});m();function m(){O().then(a=>{r.value=a.map(o=>({label:o.name,value:o.name}))})}return(a,o)=>(F(),L(e(j),null,{before:s(()=>[n(e(x),{formItems:i.value,data:e(p),onSetData:o[0]||(o[0]=c=>e(P)(e(p),c))},null,8,["formItems","data"])]),default:s(()=>[n(e(S),{type:"vec_c",anno:!1,"spatial-reference":{wkid:4490}}),n(e(R),{url:e(d)+"/ows",onLoad:l,sublayers:[{name:e(p).name,queryable:!0,popupEnabled:!0}]},{default:s(()=>[n(e(k),{orphan:!0},{plugins:s(()=>[n(e(u))]),default:s(({attributes:c})=>[$(I(c),1)]),_:1})]),_:1},8,["url","sublayers"])]),_:1}))}});export{Jt as default};
