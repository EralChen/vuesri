import{V as v}from"./chunk-ym-9RfGp.js";import{V as w}from"./chunk-X5Ydg4nF.js";import{V as _}from"./chunk-DPI4Jamn.js";import{gm as b,gs as y,l4 as V,gq as k,gp as x,l6 as S,gC as C,f3 as $,bN as M,gy as B,gF as E,gv as O,gw as T,gz as a,gH as h,gA as s,gB as d,gx as c}from"./chunk-ERvgPDZ8.js";import{V as F}from"./chunk-ayqcWHE7.js";import{u as H}from"./chunk-OMr8FG4E.js";import{c as N}from"./chunk-3E9jM2aR.js";import{e as q}from"./chunk-1lYY77mG.js";import{c as A}from"./chunk-TReN2ucZ.js";import"./chunk-rnOeZc8c.js";import"./chunk-56s4-S01.js";import"./chunk-i9_hWivA.js";import"./chunk-fL--GQs3.js";import"./chunk-0iOjwU90.js";import"./chunk-yl6pYqlf.js";import"./chunk-1OXEPNEW.js";import"./chunk-KdgvZLtn.js";import"./chunk-ReCpDqWK.js";import"./chunk-t0vOuZnC.js";import"./chunk-cDR98evz.js";import"./chunk-7nbMNl_G.js";function L(){const t=b("vaSublayer");if(!t)throw new Error("The component which use useSublayer() must be in a  Sublayer component");return t}const j={modelValue:{type:Object,default:()=>({})}},z={click:t=>t},U=y({name:"VaSublayerOnClick",emits:z,props:j,setup(t,{emit:p}){const i=L(),r=H(),u=r[N],o=A(u),e=new o("click",n=>{const l=i.createQuery(),g=q(r,{x:n.event.x,y:n.event.y});l.geometry=g,l.outFields=["*"],i.queryFeatures(l).then(f=>{p("click",{...n,featureSet:f,result:f.features[0],layer:i})})});return e.add(),V(()=>{e.remove()}),k(()=>{e.remove()}),x(()=>{e.add()}),{}}});function D(t,p,i,r,u,o){return C(t.$slots,"default")}const m=S(U,[["render",D]]);m.install=t=>{t.component(m.name,m)};const pe=y({__name:"index",setup(t){const p=async o=>{const e=o.view;await o.layer.when(),e.goTo(o.layer.fullExtent)},i=new $({symbol:new M({color:"red"})}),r=B("1=1"),u=o=>{console.log("onSublayerClick",o)};return(o,e)=>{const n=E("ElButton");return O(),T(c(v),{defaultOptions:{zoom:2}},{before:a(()=>[h("p",null,[s(n,{onClick:e[0]||(e[0]=l=>r.value="1=1")},{default:a(()=>[d("1 = 1")]),_:1}),s(n,{onClick:e[1]||(e[1]=l=>r.value="1=0")},{default:a(()=>[d("1 = 0")]),_:1}),s(n,{onClick:e[2]||(e[2]=l=>r.value="st='MO'")},{default:a(()=>[d("st = MO")]),_:1})])]),default:a(()=>[s(c(w),{type:"vec_w",anno:!1,"spatial-reference":{wkid:3857}}),s(c(_),{sublayers:[],url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",onLoad:p},{when:a(()=>[s(c(F),{id:0,renderer:c(i),visible:!0,definitionExpression:r.value},{default:a(()=>[s(c(m),{onClick:u})]),_:1},8,["renderer","definitionExpression"])]),_:1},8,["url"])]),_:1})}}});export{pe as default};
