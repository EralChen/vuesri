import{gY as E,lp as k,nt as P,h2 as V,lF as u,ce as O,h3 as F,h8 as S,oG as _,sJ as j,gZ as i,lC as g,lH as A,hf as B,h5 as w,hg as M,hl as C,ha as $,lJ as G,oE as T,hc as H,hn as L}from"./chunk-gZYsZ36N.js";import{u as N}from"./chunk-5yhB8Y-n.js";import"./chunk-9FkaBJ-M.js";import{u as I}from"./chunk-bToHc2Dr.js";import{u as J}from"./chunk-ynt3b8_I.js";function U(){const e=E("vaSketch");if(!e)throw new Error("The component which use useSketch() must be in a Sketch component");return e}const y={modelValue:{type:[Array,Object],default:()=>[]},multiple:{type:Boolean,default:!0}},Y=k(y),p={"update:modelValue":e=>e,complete:e=>e,update:e=>!0,create:e=>!0},Z=P(p),q={...y,defaultOptions:{type:Object,default:()=>({})},availableCreatureTools:{type:Array,default:void 0},position:{type:String,default:"top-right"},orphan:{type:Boolean,default:!1},modelValueInitFrom:{type:String,default:"modelValue"},viewModelPointSymbol:{type:Object},viewModelPolygonSymbol:{type:Object},viewModelPolylineSymbol:{type:Object},viewModelActiveFillSymbol:{type:Object},visibleElements:{type:Object,default:void 0}},z=Y,D={load:e=>e,...p},K=Z,Q=V({props:y,emits:p,setup(e,{emit:l}){const s=U(),n=I(),a=s.on("create",o=>{l("create",o),o.state==="start"?e.multiple||n.removeAll():o.state==="complete"&&(!e.multiple&&n.graphics.length>1&&o.graphic.geometry.type==="point"&&n.remove(n.graphics.getItemAt(0)),l("update:modelValue",[...n.graphics]),l("complete",o))});u(()=>{a.remove()});const r=s.on("update",o=>{l("update",o),o.state==="complete"&&(l("update:modelValue",[...n.graphics]),l("complete",o))});return u(()=>{r.remove()}),()=>null}}),R=V({name:"VaSketch",components:{Events:Q},emits:D,props:q,setup(e,{emit:l}){const s=N(),n=s.map;let a=E("vaGraphicsLayer",null);a||(a=new O,n.add(a));const r=z(e),o=K(l);function v(t){a.removeAll(),a.addMany(t)}F(()=>e.modelValue,(t,b)=>{let d=!1;if(t.length===b.length){for(let c=0;c<t.length;c++)if(t[c]!==b[c]){d=!0;break}}else d=!0;d&&v([...t])}),e.modelValueInitFrom==="layerGraphics"?l("update:modelValue",a.graphics):v(e.modelValue);const f=S(),h=S(!1);return _(()=>{const t=new j({container:f.value,view:s,layer:a,creationMode:"single",...e.defaultOptions});i(()=>{e.visibleElements&&(t.visibleElements=e.visibleElements)}),i(()=>{e.viewModelPointSymbol&&(t.viewModel.pointSymbol=e.viewModelPointSymbol)}),i(()=>{e.viewModelPolylineSymbol&&(t.viewModel.polylineSymbol=e.viewModelPolylineSymbol)}),i(()=>{e.viewModelPolygonSymbol&&(t.viewModel.polygonSymbol=e.viewModelPolygonSymbol)}),i(()=>{e.viewModelActiveFillSymbol&&(t.viewModel.activeFillSymbol=e.viewModelActiveFillSymbol)}),i(()=>{e.availableCreatureTools&&(t.availableCreateTools=e.availableCreatureTools)}),u(()=>{t.destroy()}),J(s.ui,t,e),g("vaGraphicsLayer",a),g("vaSketch",t),h.value=!0,l("load",{sketch:t,view:s})}),{eventsBindProps:r,eventsOnEmits:o,sketchNode:f,ready:h}}}),W={ref:"sketchNode"};function X(e,l,s,n,a,r){const o=B("Events");return w(),M("div",W,[e.ready?(w(),M(C,{key:0},[$(o,G(e.eventsBindProps,T(e.eventsOnEmits)),null,16),H(e.$slots,"default")],64)):L("",!0)],512)}const m=A(R,[["render",X]]);m.install=e=>{e.component(m.name,m)};export{m as V};
