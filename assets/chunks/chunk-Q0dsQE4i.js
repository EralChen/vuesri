import{p as d,u as p,a as y}from"./chunk-jDrT5IC_.js";import{h2 as S,oT as h,gZ as l,lC as i,bA as x,lH as _,hc as w}from"./chunk-gZYsZ36N.js";import{u as L}from"./chunk-5yhB8Y-n.js";const $={...d,defaultOptions:{type:Object,default:()=>({})},url:{type:String,default:""},sublayers:{type:Array},customParameters:{type:Object,default:()=>({})}},O={load:t=>t},v=S({name:"VaWmsLayer",emits:O,props:$,setup(t,{emit:m}){const r=L(),f=r.map,e=new h({...t.defaultOptions});l(()=>{e.url=t.url}),l(()=>{e.customParameters=t.customParameters,e.refresh()}),l(()=>{t.sublayers&&(e.sublayers=t.sublayers,o())}),e.when(o),p(e,t),y(f,e,t),i("vaLayer",e),i("vaWmsLayer",e),m("load",{layer:e,view:r});function o(){if(t.sublayers?.length&&e.resourceInfo){const u=e.resourceInfo.layers.reduce((a,s)=>(a[s.name]=s,a),{});e.sublayers.forEach(a=>{let s=a.name;s.includes(":")&&(s=s.split(":")[1]);const n=u[s];n&&(a.title||(a.title=n.title),a.maxScale||(a.maxScale=n.maxScale),a.minScale||(a.minScale=n.minScale),a.fullExtent||(a.fullExtent=new x(n.extent)))})}}return{layer:e}}});function E(t,m,r,f,e,o){return w(t.$slots,"default")}const c=_(v,[["render",E]]);c.install=t=>{t.component(c.name,c)};export{c as V};
