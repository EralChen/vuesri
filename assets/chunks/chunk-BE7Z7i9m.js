import{aI as q,aJ as V,aK as G,aL as J}from"./chunk-xdbuWCSg.js";function K(n){switch(n.type){case"CIMPointSymbol":{const t=n.symbolLayers;if(!t||t.length!==1)return null;const l=t[0];return l.type!=="CIMVectorMarker"?null:K(l)}case"CIMVectorMarker":{const t=n.markerGraphics;if(!t||t.length!==1)return null;const l=t[0];if(!l)return null;const o=l.geometry;if(!o)return null;const s=l.symbol;return!s||s.type!=="CIMPolygonSymbol"&&s.type!=="CIMLineSymbol"||s.symbolLayers?.some(r=>!!r.effects)?null:{type:"sdf",geom:o,asFill:s.type==="CIMPolygonSymbol"}}}}function U(n){return n?n.rings?n.rings:n.paths?n.paths:n.xmin!==void 0&&n.ymin!==void 0&&n.xmax!==void 0&&n.ymax!==void 0?[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]]:null:null}function $(n){let t=1/0,l=-1/0,o=1/0,s=-1/0;for(const r of n)for(const e of r)e[0]<t&&(t=e[0]),e[0]>l&&(l=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1]);return new J(t,o,l-t,s-o)}function A(n){let t=1/0,l=-1/0,o=1/0,s=-1/0;for(const r of n)for(const e of r)e[0]<t&&(t=e[0]),e[0]>l&&(l=e[0]),e[1]<o&&(o=e[1]),e[1]>s&&(s=e[1]);return[t,o,l,s]}function E(n){return n?n.rings?A(n.rings):n.paths?A(n.paths):q(n)?[n.xmin,n.ymin,n.xmax,n.ymax]:null:null}function H(n,t,l,o,s){const[r,e,a,u]=n;if(a<r||u<e)return[0,0,0,1];const f=a-r,i=u-e,m=128,c=V,M=Math.floor(.5*(.5*m-c)),h=(m-2*(M+c))/Math.max(f,i),p=Math.round(f*h)+2*M,d=Math.round(i*h)+2*M;let b=1;t&&(b=d/h/(t.ymax-t.ymin));let x=0,g=0,y=1;o&&(s?t&&l&&t.ymax-t.ymin>0&&(y=(t.xmax-t.xmin)/(t.ymax-t.ymin),x=o.x/(l*y),g=o.y/l):(x=o.x,g=o.y)),t&&(x=.5*(t.xmax+t.xmin)+x*(t.xmax-t.xmin),g=.5*(t.ymax+t.ymin)+g*(t.ymax-t.ymin)),x-=r,g-=e,x*=h,g*=h,x+=M,g+=M;let I=x/p-.5,v=g/d-.5;return s&&l&&(I*=l*y,v*=l),[b,I,v,y]}function N(n){const t=U(n.geom),l=$(t),o=128,s=V,r=Math.floor(.5*(.5*o-s)),e=(o-2*(r+s))/Math.max(l.width,l.height),a=Math.round(l.width*e)+2*r,u=Math.round(l.height*e)+2*r,f=[];for(const m of t)if(m&&m.length>1){const c=[];for(const M of m){let[h,p]=M;h-=l.x,p-=l.y,h*=e,p*=e,h+=r-.5,p+=r-.5,n.asFill?c.push([h,p]):c.push([Math.round(h),Math.round(p)])}if(n.asFill){const M=c.length-1;c[0][0]===c[M][0]&&c[0][1]===c[M][1]||c.push(c[0])}f.push(c)}const i=j(f,a,u,r);return n.asFill&&z(f,a,u,r,i),[B(i,r),a,u]}function j(n,t,l,o){const s=t*l,r=new Array(s),e=o*o+1;for(let a=0;a<s;++a)r[a]=e;for(const a of n){const u=a.length;for(let f=1;f<u;++f){const i=a[f-1],m=a[f];let c,M,h,p;i[0]<m[0]?(c=i[0],M=m[0]):(c=m[0],M=i[0]),i[1]<m[1]?(h=i[1],p=m[1]):(h=m[1],p=i[1]);let d=Math.floor(c)-o,b=Math.floor(M)+o,x=Math.floor(h)-o,g=Math.floor(p)+o;d<0&&(d=0),b>t&&(b=t),x<0&&(x=0),g>l&&(g=l);const y=m[0]-i[0],I=m[1]-i[1],v=y*y+I*I;for(let w=d;w<b;w++)for(let C=x;C<g;C++){let F,L,S=(w-i[0])*y+(C-i[1])*I;S<0?(F=i[0],L=i[1]):S>v?(F=m[0],L=m[1]):(S/=v,F=i[0]+S*y,L=i[1]+S*I);const k=(w-F)*(w-F)+(C-L)*(C-L),P=(l-C-1)*t+w;k<r[P]&&(r[P]=k)}}}for(let a=0;a<s;++a)r[a]=Math.sqrt(r[a]);return r}function z(n,t,l,o,s){for(const r of n){const e=r.length;for(let a=1;a<e;++a){const u=r[a-1],f=r[a];let i,m,c,M;u[0]<f[0]?(i=u[0],m=f[0]):(i=f[0],m=u[0]),u[1]<f[1]?(c=u[1],M=f[1]):(c=f[1],M=u[1]);let h=Math.floor(i),p=Math.floor(m)+1,d=Math.floor(c),b=Math.floor(M)+1;h<o&&(h=o),p>t-o&&(p=t-o),d<o&&(d=o),b>l-o&&(b=l-o);for(let x=d;x<b;++x){if(u[1]>x==f[1]>x)continue;const g=(l-x-1)*t;for(let y=h;y<p;++y)y<(f[0]-u[0])*(x-u[1])/(f[1]-u[1])+u[0]&&(s[g+y]=-s[g+y]);for(let y=o;y<h;++y)s[g+y]=-s[g+y]}}}}function B(n,t){const l=2*t,o=n.length,s=new Uint8Array(4*o);for(let r=0;r<o;++r){const e=.5-n[r]/l;G(e,s,4*r)}return s}export{N as a,K as e,E as f,H as m};
