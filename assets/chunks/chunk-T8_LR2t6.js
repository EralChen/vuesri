import{p as b,e as E,_ as g,c as R,a as S}from"./chunk-nhwCGmT6.js";import{a as m,t as v}from"./chunk-xESNvpj7.js";import{gp as _,kT as y,bE as L,gv as $,gt as I,nF as k,l2 as O,gC as w,gq as x,gr as V,gw as C,gz as W,l5 as M,nC as P,gK as h}from"./chunk-m3jlTyOz.js";const A={...b,type:{type:String,default:"img_c"},spatialReference:{type:Object,default:()=>({wkid:4326})},token:{type:String,default:"f0175927031c1e12cb804b0c3b8cce4d"},minScale:{type:Number,default:m[1]},maxScale:{type:Number,default:m[18]}},N={...E},T=[{level:0,resolution:156543.033928,scale:591657527591555e-6},{level:1,resolution:78271.5169639999,scale:295828763795777e-6},{level:2,resolution:39135.7584820001,scale:147914381897889e-6},{level:3,resolution:19567.8792409999,scale:73957190948944e-6},{level:4,resolution:9783.93962049996,scale:36978595474472e-6},{level:5,resolution:4891.96981024998,scale:18489297737236e-6},{level:6,resolution:2445.98490512499,scale:9244648868618e-6},{level:7,resolution:1222.99245256249,scale:4622324434309e-6},{level:8,resolution:611.49622628138,scale:2311162217155e-6},{level:9,resolution:305.748113140558,scale:1155581108577e-6},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147},{level:23,resolution:.01866138385297604,scale:70.5310735}],j={x:-20037508342787e-6,y:20037508342787e-6},B=T.reduce((e,t)=>(e[t.level]=t.scale,e),{}),z={xmin:-20037508342787e-6,ymin:-2003750834278e-5,xmax:2003750834278e-5,ymax:20037508342787e-6},r=Object.freeze(Object.defineProperty({__proto__:null,fullExtent:z,levelToScale:B,lods:T,origin:j},Symbol.toStringTag,{value:"Module"})),D={4326:v,4490:v,3857:r,102100:r,4549:r},F=_({name:"VaTdtWebTileLayer",components:{VaWebTileLayer:g},props:A,emits:N,setup(e,{emit:t}){const u=["t0","t1","t2","t3","t4","t5","t6","t7"],a=y(()=>{const s=e.type.split("_"),l=s[0],o=s[1];return{baseLayer:l,typeSR:o}}),f=y(()=>{const s=e.spatialReference.wkid,l=D[s],o={origin:l.origin,spatialReference:e.spatialReference};o.lods=l.lods.slice(1,19);const p={subDomains:u,urlTemplate:`https://{subDomain}.tianditu.gov.cn/${e.type}/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=${a.value.baseLayer}&STYLE=default&TILEMATRIXSET=${a.value.typeSR}&FORMAT=tiles&TILEMATRIX={level}&TILEROW={row}&TILECOL={col}&tk=${e.token}`,tileInfo:o,spatialReference:e.spatialReference,...e.defaultOptions};return l.fullExtent&&(p.fullExtent=new L({...l.fullExtent,spatialReference:e.spatialReference})),p}),d=R(e,["defaultOptions"]),n=S(t),c=$(!0);return I(()=>e.type,async()=>{c.value=!1,await k(),c.value=!0}),{defaultOptions:f,coreProps:d,coreEmits:n,ready:c}}});function X(e,t,u,a,f,d){const n=w("VaWebTileLayer");return e.ready?(x(),V(n,M({key:0,"default-options":e.defaultOptions},e.coreProps,P(e.coreEmits)),{default:C(()=>[W(e.$slots,"default")]),_:3},16,["default-options"])):h("",!0)}const i=O(F,[["render",X]]);i.install=e=>{e.component(i.name,i)};export{i as V,B as a,T as l};
