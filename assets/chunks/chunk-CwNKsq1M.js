import{p as d,u as p,a as y}from"./chunk-qwIWYVt5.js";import{gp as S,nQ as x,gk as l,kZ as i,bE as _,l2 as $,gz as h}from"./chunk-AGUgPSYp.js";import{u as w}from"./chunk-JOajwqOH.js";const L={...d,defaultOptions:{type:Object,default:()=>({})},url:{type:String,default:""},sublayers:{type:Array},customParameters:{type:Object,default:()=>({})}},g={load:t=>t},E=S({name:"VaWmsLayer",emits:g,props:L,setup(t,{emit:m}){const r=w(),f=r.map,e=new x({...t.defaultOptions});l(()=>{e.url=t.url}),l(()=>{e.customParameters=t.customParameters,e.refresh()}),l(()=>{t.sublayers&&(e.sublayers=t.sublayers,o())}),e.when(o),p(e,t),y(f,e,t),i("vaLayer",e),i("vaWmsLayer",e),m("load",{layer:e,view:r});function o(){if(t.sublayers?.length&&e.resourceInfo){const u=e.resourceInfo.layers.reduce((a,s)=>(a[s.name]=s,a),{});e.sublayers.forEach(a=>{let s=a.name;s.includes(":")&&(s=s.split(":")[1]);const n=u[s];n&&(a.title||(a.title=n.title),a.maxScale||(a.maxScale=n.maxScale),a.minScale||(a.minScale=n.minScale),a.fullExtent||(a.fullExtent=new _(n.extent)))})}}return{layer:e}}});function O(t,m,r,f,e,o){return h(t.$slots,"default")}const c=$(E,[["render",O]]);c.install=t=>{t.component(c.name,c)};export{c as V};
