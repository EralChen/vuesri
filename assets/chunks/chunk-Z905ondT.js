import{$ as s,a0 as i,d4 as f,a2 as x,s as c,dg as E,ar as b,bv as y}from"./chunk-ERvgPDZ8.js";const T=d=>{let e=class extends d{constructor(){super(...arguments),this.view=null}async fetchPopupFeatures(n,p){const{layer:r}=this;if(!n)throw new c("imagerylayerview:fetchPopupFeatures","Nothing to fetch without area",{layer:r});const{popupEnabled:u}=r,a=E(r,p);if(!u||a==null)throw new c("imagerylayerview:fetchPopupFeatures","Missing required popupTemplate or popupEnabled",{popupEnabled:u,popupTemplate:a});const m=await a.getRequiredFields(),t=new b;t.timeExtent=this.timeExtent,t.geometry=n,t.outFields=m,t.outSpatialReference=n.spatialReference;const{resolution:o,spatialReference:l}=this.view,w=this.view.type==="2d"?new y(o,o,l):new y(.5*o,.5*o,l),{returnTopmostRaster:h,showNoDataRecords:R}=a.layerOptions||{returnTopmostRaster:!0,showNoDataRecords:!1},v={returnDomainValues:!0,returnTopmostRaster:h,pixelSize:w,showNoDataRecords:R,signal:p!=null?p.signal:null};return r.queryVisibleRasters(t,v).then(g=>g)}canResume(){return!!super.canResume()&&!this.timeExtent?.isEmpty}};return s([i()],e.prototype,"layer",void 0),s([i()],e.prototype,"suspended",void 0),s([i(f)],e.prototype,"timeExtent",void 0),s([i()],e.prototype,"view",void 0),e=s([x("esri.views.layers.ImageryLayerView")],e),e};export{T as n};
