import{V as v}from"./chunk-2D4Q3Y6C.js";import{V as w}from"./chunk-CwbMjArF.js";import{V as _}from"./chunk-n4UCYDXc.js";import{gj as b,gp as y,l0 as V,gn as k,gm as x,l2 as S,gz as C,f0 as $,bK as E,gv as M,gC as B,gs as O,gt as T,gw as a,gx as d,gy as s,gE as h,gu as c}from"./chunk-AGUgPSYp.js";import{V as j}from"./chunk-ksWjeBmP.js";import{u as F}from"./chunk-JOajwqOH.js";import{c as H}from"./chunk-3E9jM2aR.js";import{e as L}from"./chunk-8HTivZ6i.js";import{c as N}from"./chunk-O5HgnUfA.js";import"./chunk-r9p3aZnY.js";import"./chunk-xESNvpj7.js";import"./chunk-76dCxm4a.js";import"./chunk-_RV9jjR7.js";import"./chunk-ezQvVqJs.js";import"./chunk-qwIWYVt5.js";import"./chunk-BUDQaXaC.js";import"./chunk-R46ESbsY.js";import"./chunk-U7Mc4naJ.js";import"./chunk-yPE1Yb-S.js";import"./chunk-oVLQlo07.js";import"./chunk-MdhcL4Zw.js";function q(){const t=b("vaSublayer");if(!t)throw new Error("The component which use useSublayer() must be in a  Sublayer component");return t}const z={modelValue:{type:Object,default:()=>({})}},A={click:t=>t},U=y({name:"VaSublayerOnClick",emits:A,props:z,setup(t,{emit:u}){const i=q(),r=F(),p=r[H],o=N(p),e=new o("click",n=>{const l=i.createQuery(),g=L(r,{x:n.event.x,y:n.event.y});l.geometry=g,l.outFields=["*"],i.queryFeatures(l).then(f=>{u("click",{...n,featureSet:f,result:f.features[0],layer:i})})});return e.add(),V(()=>{e.remove()}),k(()=>{e.remove()}),x(()=>{e.add()}),{}}});function D(t,u,i,r,p,o){return C(t.$slots,"default")}const m=S(U,[["render",D]]);m.install=t=>{t.component(m.name,m)};const ue=y({__name:"index",setup(t){const u=async o=>{const e=o.view;await o.layer.when(),e.goTo(o.layer.fullExtent)},i=new $({symbol:new E({color:"red"})}),r=M("1=1"),p=o=>{console.log("onSublayerClick",o)};return(o,e)=>{const n=B("ElButton");return O(),T(c(v),{defaultOptions:{zoom:2}},{before:a(()=>[h("p",null,[s(n,{onClick:e[0]||(e[0]=l=>r.value="1=1")},{default:a(()=>[d("1 = 1")]),_:1}),s(n,{onClick:e[1]||(e[1]=l=>r.value="1=0")},{default:a(()=>[d("1 = 0")]),_:1}),s(n,{onClick:e[2]||(e[2]=l=>r.value="st='MO'")},{default:a(()=>[d("st = MO")]),_:1})])]),default:a(()=>[s(c(w),{type:"vec_w",anno:!1,"spatial-reference":{wkid:3857}}),s(c(_),{sublayers:[],url:"https://sampleserver6.arcgisonline.com/arcgis/rest/services/USA/MapServer",onLoad:u},{when:a(()=>[s(c(j),{id:0,renderer:c(i),visible:!0,definitionExpression:r.value},{default:a(()=>[s(c(m),{onClick:p})]),_:1},8,["renderer","definitionExpression"])]),_:1},8,["url"])]),_:1})}}});export{ue as default};
