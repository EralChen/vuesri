import{oQ as z,kb as p,oR as y,oS as S,oT as b,oU as f,dT as u,mc as H,er as $,oV as j,h6 as D,kf as N,oW as Z,oX as E,dQ as L,m7 as M,oY as R,oZ as Y,o_ as v,m9 as P,kK as G,o$ as U,mH as h,p0 as x,my as O,dC as C}from"./chunk-ERvgPDZ8.js";import{U as W}from"./chunk-ucWCRfrt.js";function X(t,n){return w(t,()=>n)}function st(t){return w(t,n=>n.plane)}function w(t,n){const e=u(),r=u();let l=!1;return o=>{const c=n(o);if(o.action==="start"){const i=p(o.screenStart,y(S.get())),s=b(t.state.camera,i,A);s!=null&&(l=f(c,s,e))}if(!l)return null;const a=p(o.screenEnd,y(S.get())),d=b(t.state.camera,a,A);return d==null?null:f(c,d,r)?{...o,renderStart:e,renderEnd:r,plane:c,ray:d}:null}}function k(t,n,e=0,r=null,l=null){let o=null;return c=>{if(c.action==="start"&&(o=t.sceneIntersectionHelper.intersectElevationFromScreen(N(c.screenStart.x,c.screenStart.y),n,e,l),o!=null&&r!=null&&!Z(o,o,r))||o==null)return null;const a=t.sceneIntersectionHelper.intersectElevationFromScreen(N(c.screenEnd.x,c.screenEnd.y),n,e,l);return a!=null&&(r==null||Z(a,a,r))?{...c,mapStart:o,mapEnd:a}:null}}function Q(t,n,e,r=null,l=null){return k(t,e,H(n,t,e),r,l)}function J(t,n,e,r=null,l=null){return Q(t,e,$(n),r,l)}function it(t,n,e,r){const l=n.toMap(t.screenStart,{include:[e]});return l!=null?J(n,e,l,r):null}function B(t,n){const e=q,r=_,l=E();t.renderCoordsHelper.worldUpAtPosition(n,e);const o=L(l,e,M(r,n,t.state.camera.eye));return L(o,o,e),R(n,o,l)}function ut(t,n,e){let r=null;const l=new W;return l.next(X(t,B(t,n))).next(F(t,n)).next(V(t,e)).next(o=>{o.mapEnd.x=o.mapStart.x,o.mapEnd.y=o.mapStart.y,r=o}),o=>(r=null,l.execute(o),r)}function F(t,n){const e=u(),r=j(n);t.renderCoordsHelper.worldUpAtPosition(n,e);const l=u(),o=u(),c=a=>(M(a,a,n),Y(e,a,a),t.viewingMode==="global"&&j(a)*Math.sign(v(e,a))<.001-r&&M(a,P(a,e,.001),n),G(a,a,n),a);return a=>(a.renderStart=c(D(l,a.renderStart)),a.renderEnd=c(D(o,a.renderEnd)),a)}function V(t,n){const e=t.renderCoordsHelper;return r=>{const l=e.fromRenderCoords(r.renderStart,n),o=e.fromRenderCoords(r.renderEnd,n);return l!=null&&o!=null?{...r,mapStart:l,mapEnd:o}:null}}var I;function dt(t){let n=null;return e=>{switch(e.action){case"start":n=t.disableDisplay();break;case"end":case"cancel":n!=null&&(n.remove(),n=null)}return e}}function mt(t,n=null){const e=U(t.state.viewingMode);e.options.selectionMode=!0,e.options.store=h.MIN,e.options.hud=!1;const r=N(),l={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},o=u(),c=n??t.spatialReference,a=i=>{t.map.ground&&t.map.ground.opacity<1?l.exclude.add(x):l.exclude.delete(x),t.sceneIntersectionHelper.intersectIntersectorScreen(p(i,r),e,l);const s=e.results.min;let m;if(s.getIntersectionPoint(o))m=s.intersector===O.TERRAIN?I.GROUND:I.OTHER;else{if(!e.results.ground.getIntersectionPoint(o))return null;m=I.GROUND}return{location:t.renderCoordsHelper.fromRenderCoords(o,c),surfaceType:m}};let d;return i=>{if(i.action==="start"){const m=a(i.screenStart);d=m!=null?m.location:null}if(d==null)return null;const s=a(i.screenEnd);return s?.location!=null?{...i,mapStart:d,mapEnd:s.location,surfaceType:s.surfaceType}:null}}(function(t){t[t.GROUND=0]="GROUND",t[t.OTHER=1]="OTHER"})(I||(I={}));const q=u(),_=u(),A=z(),K="theme-style";function T(t,n){return rt(et(tt(nt(t),n)),n.size)}function tt(t,{accentColor:n,contrastColor:e}){const r=n.toHex(),l=n.a,o=e.toHex(),c=e.a,a=t.getElementsByTagNameNS("http://www.w3.org/2000/svg","style").namedItem(K);return a&&(a.innerHTML=`
      .contrast-fill { fill: ${o}; fill-opacity: ${c}; }
      .contrast-stroke { stroke: ${o}; stroke-opacity: ${c};  }
      .accent-fill { fill: ${r}; fill-opacity: ${l}; }
      .accent-stroke { stroke: ${r}; stroke-opacity:  ${l}; }`),t}function nt(t){const n=t.split(",")[1],e=atob(n);return new DOMParser().parseFromString(e,"image/svg+xml")}function et(t){const n=new XMLSerializer().serializeToString(t);return`data:image/svg+xml;base64,${btoa(n)}`}function rt(t,n){const e=new Image(n,n);return e.src=t,e}const ot="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxwYXRoIGQ9Ik0yOCAwYTI4IDI4IDAgMSAxIDAgNTYgMjggMjggMCAwIDEgMC01NnoiIGNsYXNzPSJhY2NlbnQtZmlsbCIvPjxwYXRoIHN0cm9rZS13aWR0aD0iNC45OSIgZD0iTTIwLjA1IDQwLjg2YTE1LjA1IDE1LjA1IDAgMCAwIDE3LjE0LTEuNSAxNS4wNSAxNS4wNSAwIDAgMCA0LjQ3LTE2LjY1IDE1LjA1IDE1LjA1IDAgMCAwLTIyLjcyLTcuMTUgMTUuMDUgMTUuMDUgMCAwIDAtNS41IDcuMTUiIGNsYXNzPSJjb250cmFzdC1zdHJva2UiLz48cGF0aCBkPSJtMTAuOTcgMzUuNTcgNS4zOCAxMi4wNyA3Ljc5LTEzLjQ3LTEzLjE3IDEuNHoiIGNsYXNzPSJjb250cmFzdC1maWxsIi8+PC9zdmc+",lt="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1NiIgaGVpZ2h0PSI1NiIgZmlsbD0ibm9uZSIgdmVyc2lvbj0iMi4wIj48c3R5bGUgaWQ9InRoZW1lLXN0eWxlIj4uY29udHJhc3QtZmlsbHtmaWxsOiNmZmZ9LmNvbnRyYXN0LXN0cm9rZXtzdHJva2U6I2ZmZn0uYWNjZW50LWZpbGx7ZmlsbDojZmY3ZjAwO2ZpbGwtb3BhY2l0eTouNX08L3N0eWxlPjxjaXJjbGUgY3g9IjM5LjQ3OCIgY3k9IjMuMDc4IiByPSIyOCIgY2xhc3M9ImFjY2VudC1maWxsIiB0cmFuc2Zvcm09InJvdGF0ZSg0MC41NDIpIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSI1IiBkPSJtNy4wNzQgMzAuMDUzIDI5LjM5NyAxMS45ODUtMy42NzMtMzMuNDkzIiBjbGFzcz0iY29udHJhc3Qtc3Ryb2tlIi8+PHBhdGggc3Ryb2tlLXdpZHRoPSIyLjk5NiIgZD0iTTI0LjUwNCAyMy4yMDdhMTEuOTgyIDExLjk4MiAwIDAgMC05LjggNy41MDciIGNsYXNzPSJjb250cmFzdC1zdHJva2UgY29udHJhc3QtZmlsbCIvPjxwYXRoIGQ9Im0yOS44MTggMjIuODA4LTYuMTg0IDQuNi0uNTQxLTguMzY0eiIgY2xhc3M9ImNvbnRyYXN0LWZpbGwiLz48L3N2Zz4=",g=64;function It(t,n){const{accentColor:e,contrastColor:r,preMultiplyAlpha:l}=n;return t.fromData(`heading-rotate:[accent:${e},contrast:${r},size:${g}]`,()=>new C(T(ot,{accentColor:e,contrastColor:r,size:g}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:l}))}function gt(t,n){const{accentColor:e,contrastColor:r,preMultiplyAlpha:l}=n;return t.fromData(`tilt-rotate:[accent:${e},contrast:${r},size:${g}]`,()=>new C(T(lt,{accentColor:e,contrastColor:r,size:g}),{mipmap:!0,reloadable:!0,preMultiplyAlpha:l}))}export{dt as A,J as D,mt as F,X as H,it as M,ut as P,Q as T,st as U,V as k,It as l,gt as n};
