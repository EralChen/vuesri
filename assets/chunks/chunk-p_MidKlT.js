import{gj as _,gp as d,y as h,P as g,gl as w,l2 as V,gz as T,gv as f,kY as b,gs as v,gt as F,gw as s,gu as e,gy as n,gF as L,gx as x}from"./chunk-AGUgPSYp.js";import{V as I,s as P}from"./chunk-u3Bj6ssA.js";import"./chunk-kSUDKiq8.js";import{R as $}from"./chunk-KpbMssn-.js";import"./chunk-2D4Q3Y6C.js";import"./chunk-Ds20mVVU.js";import"./chunk-76dCxm4a.js";import"./chunk-jr0JNglJ.js";import"./chunk-BUDQaXaC.js";import"./chunk-C8JSBJtj.js";import"./chunk-siNuUg0c.js";import"./chunk-tVToF2Cy.js";import{V as j}from"./chunk-CwbMjArF.js";import"./chunk-ezQvVqJs.js";import"./chunk-_RV9jjR7.js";import"./chunk-j2-k2d5L.js";import"./chunk-KHbqfZUs.js";import{V as k}from"./chunk-5Ay1NrLY.js";import"./chunk-NHnMZHZ3.js";import"./chunk-U7Mc4naJ.js";import"./chunk-vo1hzf_y.js";import"./chunk-yfkdfAQZ.js";import"./chunk-aUO4Bj-s.js";import"./chunk-iiZDLUFt.js";import"./chunk-Od_xQdNW.js";import{V as S}from"./chunk-3LKyCLwk.js";import"./chunk-dhA5HYAf.js";import"./chunk-mjAvRdMK.js";import"./chunk-n4UCYDXc.js";import"./chunk-ksWjeBmP.js";import"./chunk-Lz4GyNqG.js";import"./chunk-A7qu2dvB.js";import"./chunk-EImjLoU_.js";import"./chunk-un_TZfHH.js";import"./chunk-C5yL8CwZ.js";import"./chunk-fEkjt9Fb.js";import"./chunk-yjkgyjT_.js";import"./chunk-9G8eJt0B.js";import{V as R}from"./chunk-CwNKsq1M.js";import"./chunk-j5boZggc.js";import"./chunk-oFQUDPZF.js";import{u as B}from"./chunk-rbE2exqQ.js";import"./chunk-oVLQlo07.js";import"./chunk-u8xdCC6Y.js";import"./chunk-r9p3aZnY.js";import"./chunk-JOajwqOH.js";import"./chunk-3E9jM2aR.js";import"./chunk-qwIWYVt5.js";import"./chunk-m5CRLALA.js";import"./chunk-R46ESbsY.js";import"./chunk-O5HgnUfA.js";import"./chunk-IqLr8xXs.js";import"./chunk-yPE1Yb-S.js";import"./chunk-xESNvpj7.js";import"./chunk-VItKHIgA.js";import"./chunk-YlHqbaHd.js";import"./chunk-8HTivZ6i.js";import"./chunk-Stu0kjGb.js";import"./chunk-MdhcL4Zw.js";import"./chunk-LhiknyOs.js";function E(){const t=_("vaPopupTemplate");if(!t)throw new Error("The component which use usePopupTemplate() must be in a PopupTemplate component");return t}const y="http://t1.zjsophon.com:10000/geoserver",O=new $({baseURL:y,setRequestInit(t){return t.headers,t}}),W=t=>O.request(t),D=()=>W({method:"GET",url:"/rest/layers.json"}).then(t=>t.layers.layer),N={defaultOptions:{type:Object,default:()=>({})}},U={load:t=>t},q=d({name:"VaWmsLayerPopupTemplate",emits:U,props:N,setup(t,{emit:l}){const r=B(),i=r.fetchFeatureInfoFunction,p=E();return r.fetchFeatureInfoFunction=async m=>{m.info_format="application/json",m.feature_count=5;const{data:a}=await h(r.featureInfoUrl,{query:m});return a.features.map(o=>new g({attributes:o.properties,popupTemplate:p}))},w(()=>{r.fetchFeatureInfoFunction=i}),{popupTemplate:p}}});function z(t,l,r,i,p,m){return T(t.$slots,"default")}const u=V(q,[["render",z]]);u.install=t=>{t.component(u.name,u)};const Kt=d({__name:"index",setup(t){const l=async a=>{const o=a.view;await a.layer.when(),o.goTo(a.layer.fullExtent)},r=f([]),i=f([{templateType:"VkfSelect",prop:"name",filterable:!0,options:r}]),p=b({name:"pub:O3_predict_20220301"});m();function m(){D().then(a=>{r.value=a.map(o=>({label:o.name,value:o.name}))})}return(a,o)=>(v(),F(e(k),null,{before:s(()=>[n(e(I),{formItems:i.value,data:e(p),onSetData:o[0]||(o[0]=c=>e(P)(e(p),c))},null,8,["formItems","data"])]),default:s(()=>[n(e(j),{type:"vec_c",anno:!1,"spatial-reference":{wkid:4490}}),n(e(R),{url:e(y)+"/ows",onLoad:l,sublayers:[{name:e(p).name,queryable:!0,popupEnabled:!0}]},{default:s(()=>[n(e(S),{orphan:!0},{plugins:s(()=>[n(e(u))]),default:s(({attributes:c})=>[x(L(c),1)]),_:1})]),_:1},8,["url","sublayers"])]),_:1}))}});export{Kt as default};
