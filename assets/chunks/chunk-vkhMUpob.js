import{_ as I,a1 as L}from"./chunk-217NDGZJ.js";import{n as M}from"./chunk-Ex6QhB_r.js";const F=t=>{let e=class extends t{attach(){this.view.timeline.record(`${this.layer.title} (BitmapTileLayer) Attach`),this._bitmapView=new M(this._tileInfoView),this.container.addChild(this._bitmapView)}detach(){this.container.removeChild(this._bitmapView),this._bitmapView?.removeAllChildren(),this._bitmapView=null}};return e=I([L("esri.views.2d.layers.BitmapTileLayerView2D")],e),e};function V(t){return t instanceof HTMLImageElement?t.naturalWidth:t.width}function _(t){return t instanceof HTMLImageElement?t.naturalHeight:t.height}function y(t,e,n,o){if(n.level===o.level)return e;const i=t.tileInfo.size,l=t.getTileResolution(n.level),r=t.getTileResolution(o.level);let a=t.getLODInfoAt(o.level);const m=a.getXForColumn(o.col),d=a.getYForRow(o.row);a=t.getLODInfoAt(n.level);const u=a.getXForColumn(n.col),w=a.getYForRow(n.row),s=V(e)/i[0],h=_(e)/i[1],g=Math.round(s*((m-u)/l)),f=Math.round(h*(-(d-w)/l)),v=Math.round(s*i[0]*(r/l)),p=Math.round(h*i[1]*(r/l)),c=C(i);return c.getContext("2d").drawImage(e,g,f,v,p,0,0,i[0],i[1]),c}function C(t){const e=document.createElement("canvas");return[e.width,e.height]=t,e}export{y as n,C as o,F as r};
