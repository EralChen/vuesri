import{gY as y,h2 as h,U as _,D as V,h0 as w,lH as b,hc as T,h8 as f,lx as v,h5 as F,h6 as L,h9 as s,ha as n,h7 as e,hb as $,hi as x}from"./chunk-gZYsZ36N.js";import{V as I,s as P}from"./chunk-C2-Ka-Qj.js";import"./chunk-0SdvbvMf.js";import{R as g}from"./chunk-KpbMssn-.js";import"./chunk-gOzRnZOw.js";import"./chunk-evP4VADb.js";import"./chunk-8dd3L-WV.js";import"./chunk-q260nDQE.js";import"./chunk-MEWVNnB1.js";import"./chunk-klFVdt9Y.js";import"./chunk-wiWkZG-8.js";import"./chunk-Bj4SJbsG.js";import{V as S}from"./chunk-eL7rTImP.js";import"./chunk-80lo0Aq7.js";import"./chunk-GWlnAQeV.js";import"./chunk-iq2sSn6A.js";import"./chunk-JsrD4NBF.js";import{V as j}from"./chunk-jHUwkOTJ.js";import"./chunk-mdho3h-Q.js";import"./chunk-0BkBQc93.js";import"./chunk-qEPDu6au.js";import"./chunk-MDlOrpWw.js";import"./chunk-RY6-crJL.js";import"./chunk-9FkaBJ-M.js";import"./chunk-TSOFjB00.js";import{V as k}from"./chunk-_CdkHYK2.js";import"./chunk-ciRCsXq6.js";import"./chunk-B-fCu76y.js";import"./chunk-o5a-jOIG.js";import"./chunk-OD9jrjV5.js";import"./chunk-3XJdahR2.js";import"./chunk-BzzAKxcT.js";import"./chunk-UDDAnXvx.js";import"./chunk-871Nh5KU.js";import"./chunk-WR4Mf62_.js";import"./chunk-bzXeE8i4.js";import"./chunk-IyV86aOo.js";import"./chunk-2N21xbGr.js";import{V as R}from"./chunk-Q0dsQE4i.js";import"./chunk-me0K167v.js";import"./chunk-hoiPJAwM.js";import{u as U}from"./chunk-miGwR9an.js";import"./chunk-t4TbIqUg.js";import"./chunk-pR8IN3Kg.js";import"./chunk-5yhB8Y-n.js";import"./chunk-B3AFDltd.js";import"./chunk-jDrT5IC_.js";import"./chunk-u9gmVhyK.js";import"./chunk-WXBpuwbD.js";import"./chunk-_piOf1Cc.js";import"./chunk-ynt3b8_I.js";import"./chunk-iaPf1V3f.js";import"./chunk-AKBpUdIm.js";import"./chunk-2bs7e3B8.js";import"./chunk-xmLgv4Xk.js";import"./chunk-kU4_0DtS.js";import"./chunk-bToHc2Dr.js";import"./chunk-_rTpuW4M.js";import"./chunk-e9fsDuYR.js";import"./chunk-UnR6FEZ6.js";function B(){const t=y("vaPopupTemplate");if(!t)throw new Error("The component which use usePopupTemplate() must be in a PopupTemplate component");return t}const d="http://t1.zjsophon.com:10000/geoserver",D=new g({baseURL:d,setRequestInit(t){return t.headers,t}}),E=t=>D.request(t),O=()=>E({method:"GET",url:"/rest/layers.json"}).then(t=>t.layers.layer),W={defaultOptions:{type:Object,default:()=>({})}},N={load:t=>t},q=h({name:"VaWmsLayerPopupTemplate",emits:N,props:W,setup(t,{emit:l}){const r=U(),i=r.fetchFeatureInfoFunction,p=B();return r.fetchFeatureInfoFunction=async m=>{m.info_format="application/json",m.feature_count=5;const{data:a}=await _(r.featureInfoUrl,{query:m});return a.features.map(o=>new V({attributes:o.properties,popupTemplate:p}))},w(()=>{r.fetchFeatureInfoFunction=i}),{popupTemplate:p}}});function C(t,l,r,i,p,m){return T(t.$slots,"default")}const u=b(q,[["render",C]]);u.install=t=>{t.component(u.name,u)};const Kt=h({__name:"index",setup(t){const l=async a=>{const o=a.view;await a.layer.when(),o.goTo(a.layer.fullExtent)},r=f([]),i=f([{templateType:"VkfSelect",prop:"name",filterable:!0,options:r}]),p=v({name:"pub:O3_predict_20220301"});m();function m(){O().then(a=>{r.value=a.map(o=>({label:o.name,value:o.name}))})}return(a,o)=>(F(),L(e(j),null,{before:s(()=>[n(e(I),{formItems:i.value,data:e(p),onSetData:o[0]||(o[0]=c=>e(P)(e(p),c))},null,8,["formItems","data"])]),default:s(()=>[n(e(S),{type:"vec_c",anno:!1,"spatial-reference":{wkid:4490}}),n(e(R),{url:e(d)+"/ows",onLoad:l,sublayers:[{name:e(p).name,queryable:!0,popupEnabled:!0}]},{default:s(()=>[n(e(k),{orphan:!0},{plugins:s(()=>[n(e(u))]),default:s(({attributes:c})=>[$(x(c),1)]),_:1})]),_:1},8,["url","sublayers"])]),_:1}))}});export{Kt as default};
