import{u as d}from"./chunk-dfbnxT3d.js";import{c as h,b as w}from"./chunk-3E9jM2aR.js";import{gp as f,l0 as p,nz as u,go as v}from"./chunk-m3jlTyOz.js";const y={cursor:{type:String,default:""}},_={"update:cursor":s=>s||!0},N=f({emits:_,props:y,setup(s,{emit:a}){const e=d();class t extends v{eventName;handler;cacheData;constructor(i,l){super(),this.eventName=i,this.handler=l}add(){const i=e.on(this.eventName,this.handler);this.removeHandler=i.remove}}const n=e[h],c=new t("click",async o=>{const i=await e.hitTest(o);console.log("va_view_click_event",{view:e,event:o,hitTestResult:i}),n.emit("click",{view:e,event:o,hitTestResult:i})});c.add(),p(()=>{c.remove()});const r=new t("pointer-move",u(async o=>{const i=await e.hitTest(o),l=i.results[0];let m;if(l&&(l.type==="media"?m=l.layer:l.type==="graphic"&&(m=l.graphic?.layer)),m){const g=m[w];a("update:cursor",g)}else a("update:cursor","initial");n.emit("pointer-move",{view:e,event:o,hitTestResult:i})},600,{leading:!1,trailing:!0}));return r.add(),p(()=>{r.remove()}),()=>null}}),k=f({setup(){const s=d();class a extends v{propertyName;handler;cacheData;constructor(r,o){super(),this.propertyName=r,this.handler=o}add(){const r=s.watch(this.propertyName,this.handler);this.removeHandler=r.remove}}const e=s[h],t=new a("extent",u((c,r)=>{e.emit("watch:extent",[c,r])},50));t.add(),p(()=>{t.remove()});const n=new a("scale",u((c,r)=>{e.emit("watch:scale",[c,r])},50));return n.add(),p(()=>{n.remove()}),()=>null}});function M(s){return{all:s=s||new Map,on:function(a,e){var t=s.get(a);t?t.push(e):s.set(a,[e])},off:function(a,e){var t=s.get(a);t&&(e?t.splice(t.indexOf(e)>>>0,1):s.set(a,[]))},emit:function(a,e){var t=s.get(a);t&&t.slice().map(function(n){n(e)}),(t=s.get("*"))&&t.slice().map(function(n){n(a,e)})}}}export{N as _,k as a,_ as e,M as m,y as p};
